import{f as K,g as I}from"./VIKLA3AL.js";import{a as U}from"./X2SRSDMC.js";import{b as V}from"./FVT6UZZV.js";import{b as O,d as H,e as z}from"./XQ7OTANB.js";import{$ as G,Q as L,ba as Y,i as B}from"./W7JCQNRZ.js";import{na as D,w as v,ya as F}from"./NVVQBQGC.js";import{a as w}from"./SZ3C6HJE.js";import{a as N}from"./RBW4HNBE.js";import{c as W}from"./GDFJJHFX.js";import{a as Q}from"./42TZCCKB.js";import{f as g}from"./UTGLRY7A.js";var R=g(w());var M={am:{label:"\u12A0\u121B\u122D\u129B",en_label:"Amharic"},ar:{label:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",en_label:"Arabic"},bg:{label:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438",en_label:"Bulgarian"},bn:{label:"\u09AC\u09BE\u0982\u09B2\u09BE",en_label:"Bengali"},ca:{label:"Catal\xE0",en_label:"Catalan"},cs:{label:"\u010Ce\u0161tina",en_label:"Czech"},da:{label:"Dansk",en_label:"Danish"},de:{label:"Deutsch",en_label:"German"},el:{label:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC",en_label:"Greek"},en:{label:"English",en_label:"English"},en_GB:{label:"English (UK)",en_label:"English (UK)"},en_US:{label:"English (US)",en_label:"English (US)"},es:{label:"Espa\xF1ol",en_label:"Spanish"},es_419:{label:"Espa\xF1ol (Latinoam\xE9rica)",en_label:"Spanish (Latin America)"},et:{label:"Eesti",en_label:"Estonian"},fa:{label:"\u0641\u0627\u0631\u0633\u06CC",en_label:"Persian"},fi:{label:"Suomi",en_label:"Finnish"},fil:{label:"Filipino",en_label:"Filipino"},fr:{label:"Fran\xE7ais",en_label:"French"},gu:{label:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0",en_label:"Gujarati"},he:{label:"\u05E2\u05D1\u05E8\u05D9\u05EA",en_label:"Hebrew"},he_IL:{label:"\u05E2\u05D1\u05E8\u05D9\u05EA (\u05D9\u05E9\u05E8\u05D0\u05DC)",en_label:"Hebrew (Israel)"},hi:{label:"\u0939\u093F\u0928\u094D\u0926\u0940",en_label:"Hindi"},hr:{label:"Hrvatski",en_label:"Croatian"},hu:{label:"Magyar",en_label:"Hungarian"},in:{label:"Bahasa Indonesia",en_label:"Indonesian"},id:{label:"Indonesia",en_label:"Indonesian"},it:{label:"Italiano",en_label:"Italian"},ja:{label:"\u65E5\u672C\u8A9E",en_label:"Japanese"},kn:{label:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1",en_label:"Kannada"},ko:{label:"\uD55C\uAD6D\uC5B4",en_label:"Korean"},lt:{label:"Lietuvi\u0173",en_label:"Lithuanian"},lv:{label:"Latvie\u0161u",en_label:"Latvian"},ml:{label:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02",en_label:"Malayalam"},mr:{label:"\u092E\u0930\u093E\u0920\u0940",en_label:"Marathi"},ms:{label:"Melayu",en_label:"Malay"},nl:{label:"Nederlands",en_label:"Dutch"},no:{label:"Norsk",en_label:"Norwegian"},pl:{label:"Polski",en_label:"Polish"},pt_BR:{label:"Portugu\xEAs (Brasil)",en_label:"Portuguese (Brazil)"},pt_PT:{label:"Portugu\xEAs (Portugal)",en_label:"Portuguese (Portugal)"},ro:{label:"Rom\xE2n\u0103",en_label:"Romanian"},ru:{label:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",en_label:"Russian"},sk:{label:"Sloven\u010Dina",en_label:"Slovak"},sl:{label:"Sloven\u0161\u010Dina",en_label:"Slovenian"},sr:{label:"\u0421\u0440\u043F\u0441\u043A\u0438",en_label:"Serbian"},sv:{label:"Svenska",en_label:"Swedish"},sw:{label:"Kiswahili",en_label:"Swahili"},ta:{label:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD",en_label:"Tamil"},te:{label:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41",en_label:"Telugu"},th:{label:"\u0E44\u0E17\u0E22",en_label:"Thai"},tr:{label:"T\xFCrk\xE7e",en_label:"Turkish"},ua:{label:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",en_label:"Ukrainian"},uk:{label:"\u0627\u0631\u062F\u0648",en_label:"Urdu"},vi:{label:"Ti\u1EBFng Vi\u1EC7t",en_label:"Vietnamese"},zh_CN:{label:"\u7B80\u4F53\u4E2D\u6587",en_label:"SimplifiedChinese"},zh_TW:{label:"\u7E41\u4F53\u4E2D\u6587",en_label:"TraditionalChinese"}};var A=g(w());var _=g(v());function Z(a,{inputValue:l}){return a.filter(n=>{let o=n.label.toLowerCase(),t=n.value.toLowerCase(),b=n.origin?.en_label?.toLowerCase()||"",h=l.toLowerCase();return o.includes(h)||t.includes(h)||b.includes(h)})}var $=a=>{let{options:l,label:n="",value:o="",onChange:t=s=>{},sx:b,placement:h="auto",disablePortal:u=!0,onPermission:f}=a,[d,p]=A.default.useState(!1),r=()=>{a.onClose&&a.onClose(),p(!1)},m=()=>{a.onOpen&&a.onOpen(),p(!0)},{t:i}=V("common"),c=s=>(0,_.jsx)(F,{primary:(0,_.jsx)(D,{fontSize:14,children:s.label})}),P=(0,A.useCallback)((s,e)=>e.origin?.permission?(0,_.jsx)(I,{mountContainerName:e.origin.permission.mountContainerName,sceneType:e.origin.permission.sceneType,allowedRoles:e.origin.permission.allowedRoles,preAuth:e.origin.permission.preAuth,onPermission:f,TooltipProps:{placement:"left"},children:(0,_.jsx)(L,{selected:e.value===o,disabled:e.origin?.disabled,value:e.value,onClick:C=>{e.origin?.disabled&&(C.stopPropagation(),C.preventDefault());let y=e.value;t&&t(y),r()},children:c(e)})},e.value):(0,_.jsx)(L,{value:e.value,selected:e.value===o,onClick:C=>{e.origin?.disabled&&(C.stopPropagation(),C.preventDefault());let y=e.value;t&&t(y),r()},children:c(e)},e.value),[o,t]),S=(0,A.useMemo)(()=>l.find(s=>s.value===o)||l[0],[l,o]);return(0,_.jsx)(B,{open:d,onClose:r,onOpen:m,disablePortal:u,disableClearable:!0,autoHighlight:!0,value:S,size:"small",sx:{width:220,"& .MuiInputBase-root":{height:b?.height??"auto"},"& .MuiInputBase-input":{fontSize:14,fontWeight:500,pl:"2px !important"},"& .MuiAutocomplete-popupIndicator":{color:"inherit",p:0},...b},getOptionLabel:s=>s.label,options:l,onChange:(s,e)=>{t(e.value)},noOptionsText:i("no_options"),filterOptions:Z,renderOption:P,componentsProps:{popper:{placement:h}},renderInput:s=>(0,_.jsx)(G,{...s,label:n,inputProps:{...s.inputProps,autoComplete:"new-password"}})})},E=$;var k=g(w());var x=g(Q());var J=O({key:"AuthModalShowState",default:!1}),X=O({key:"AuthParamsState",default:{ref:""}});var j="AUTH_MODAL_CALLBACK",ee=new N({runtime:"client"}),ae=()=>{let{isLogin:a,userInfo:l}=K(),[n,o]=H(X),t=z(J),b=(0,k.useCallback)((u,f)=>{let{resolveWithClose:d=!1,timeout:p}=f||{};return U(new Promise(r=>{if(a&&l){r({isLogin:a,userInfo:l});return}let m=i=>{let{isLogin:c,userInfo:P,reason:S}=i.detail;d&&S==="close"?r({isLogin:c,userInfo:P}):S==="auth"&&r({isLogin:c,userInfo:P}),window.removeEventListener(j,m)};window.addEventListener(j,m),o(u),t(!0)}),p??1e3*60*5,{isLogin:!1})},[a,l]);return{syncAppAuthStatusPromise:(0,k.useCallback)(async()=>{if(a&&l)return{isLogin:a,userInfo:l};let{ref:u}=n;return await ee.postMessage({event:"Client_openAuthClientTab",data:{ref:u}}),new Promise(async f=>{let d=async p=>{let{event:r,data:m}=p;if(!(p?.id&&p.id!==W))switch(r){case"Client_authDone":{let{data:i}=m;return x.default.runtime.onMessage.removeListener(d),f({isLogin:!!i.userInfo,userInfo:i.userInfo}),{success:!0,data:{},message:"ok"}}break}};x.default.runtime.onMessage.addListener(d)})},[n,a,l]),waitAuthModalPromise:b}},q=ae;var T=g(v()),le=a=>{let{label:l="",value:n="",onChange:o=i=>{},placement:t="left",sx:b,disablePortal:h,hasAuto:u=!1,inWhere:f,hasPermission:d=!1}=a,{waitAuthModalPromise:p}=q(),r=(0,R.useMemo)(()=>{let i=Object.keys(M).map(c=>{let P=M[c];return{label:P.label,value:c,origin:{value:c,...P}}});return u&&i.unshift({label:"Auto",value:"auto"}),i},[u,f]),m=(0,R.useMemo)(()=>n&&n!==""?n:u?"auto":"en",[n,u]);return d?(0,T.jsx)(I,{mountContainerName:f,sceneType:"WEBACCESS_LANGUAGE",allowedRoles:["pro","pro_gift","elite"],TooltipProps:{placement:"left"},preAuth:async()=>(await p({ref:"webchatgpt-web-access"})).userInfo,children:(0,T.jsx)(E,{label:l,options:r,value:m,onChange:o,placement:t,sx:b})}):(0,T.jsx)(E,{label:l,options:r,value:m,onChange:o,placement:t,disablePortal:h,sx:b})},Ee=le;export{J as a,j as b,q as c,M as d,E as e,Ee as f};
