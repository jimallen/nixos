import{b as i}from"../chunks/R2KXBBZI.js";import{a as c}from"../chunks/USLLVG5P.js";import{d as a}from"../chunks/GVJKCNTM.js";import"../chunks/UTGLRY7A.js";var m=window.fetch,y=async(r,n)=>{let o=a(n);if(r==="https://chat.openai.com/backend-api/conversation"&&n.method==="POST"&&n.headers.accept==="text/event-stream"){let t=o.body;try{let e=JSON.parse(t),s=await i();s&&e.messages.unshift({author:{role:"system"},content:{content_type:"text",parts:[s]},id:c(),metadata:{}}),t=JSON.stringify(e)}catch{}o.body=t}return m(r,o??n).then(function(t){return new Promise(e=>{e(t)})})};window.fetch=y;
