var background=function(e){"use strict";function t(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function n(){return crypto.randomUUID()}function a(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,(e=>("0"+e.toString(16)).slice(-2))).join("")}function r(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}const o=[{langCode:"DE",langCodeForSpeech:"de-DE",supportsFormality:!0},{langCode:"EN-GB",langCodeForSpeech:"en",voice:"Google UK English Male"},{langCode:"EN-US",langCodeForSpeech:"en",voice:"Google UK English Male"},{langCode:"FR",langCodeForSpeech:"fr-FR",voice:"Thomas",supportsFormality:!0},{langCode:"ES",langCodeForSpeech:"es-ES",voice:"Google espa√±ol",label:"ES",supportsFormality:!0},{langCode:"IT",langCodeForSpeech:"it-IT",supportsFormality:!0},{langCode:"ID",langCodeForSpeech:"id-ID"},{langCode:"PL",langCodeForSpeech:"pl-PL",supportsFormality:!0},{langCode:"NL",langCodeForSpeech:"nl-NL",voice:"Google Nederlands",label:"NL",supportsFormality:!0},{langCode:"PT-PT",langCodeForSpeech:"pt-PT",supportsFormality:!0},{langCode:"PT-BR",langCodeForSpeech:"pt-PT",supportsFormality:!0},{langCode:"RU",langCodeForSpeech:"ru-RU",supportsFormality:!0},{langCode:"ZH",langCodeForSpeech:"zh-CN"},{langCode:"JA",langCodeForSpeech:"ja-JP",supportsFormality:!0},{langCode:"BG",langCodeForSpeech:"bg-BG"},{langCode:"CS",langCodeForSpeech:"cs-CZ"},{langCode:"DA",langCodeForSpeech:"da-DK"},{langCode:"ET",langCodeForSpeech:"et"},{langCode:"FI",langCodeForSpeech:"fi-FI",voice:"Satu"},{langCode:"EL",langCodeForSpeech:"el-GR"},{langCode:"HU",langCodeForSpeech:"hu-HU"},{langCode:"LV",langCodeForSpeech:"lv"},{langCode:"LT",langCodeForSpeech:"lt"},{langCode:"RO",langCodeForSpeech:"ro-RO"},{langCode:"SK",langCodeForSpeech:"sk-SK"},{langCode:"SL",langCodeForSpeech:"sl"},{langCode:"SV",langCodeForSpeech:"sv-SE"},{langCode:"TR",langCodeForSpeech:"tr-TR"},{langCode:"UK",langCodeForSpeech:"uk-UA"},{langCode:"NB",langCodeForSpeech:"nb-NO"},{langCode:"KO",langCodeForSpeech:"ko-KR"}],s=0,i={inline:"inline",automatic:"automatic",manual:"manual",input:"input"},c={notLoggedIn:1,loggedInPro:2,loggedInFree:3},l={notLoggedIn:1500,loggedInFree:5e3},d={defaultPopup:1,fptInjectedPopup:2,inlineTooltipPopup:3},g={extensionIcon:1,fptAutoInject:2},u={defaultPopup:1,injectedFptPopup:2,inlinePopup:3},p={hintKeyboardShortcut:"HINT_KEYBOARD_SHORTCUT",inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION"},h={inlineTranslationTriggerIcon:"INLINE_TRANSLATION_TRIGGER_ICON",inlineTranslationSettingsIcon:"INLINE_TRANSLATION_SETTINGS_ICON",inlineTranslationSettingPopup:"INLINE_TRANSLATION_SETTING_POPUP",inputTranslationTriggerIcon:"INPUT_TRANSLATION_TRIGGER_ICON",inputTranslationSettingsIcon:"INPUT_TRANSLATION_SETTINGS_ICON",inputTranslationSettingPopup:"INPUT_TRANSLATION_SETTING_POPUP",settingsPageFPT:"SETTINGS_PAGE_FPT",settingsPageReading:"SETTINGS_PAGE_READING",settingsPageWriting:"SETTINGS_PAGE_WRITING",settingsPageIntegrations:"SETTINGS_PAGE_INTEGRATIONS",fptHideModal:"FPT_HIDE_MODAL",inputTranslationReadMoreLink:"INPUT_TRANSLATION_READ_MORE_LINK",inlineTranslationReadMoreLink:"INLINE_TRANSLATION_READ_MORE_LINK",fptTranslationReadMoreLink:"FPT_TRANSLATION_READ_MORE_LINK",extensionHubToggleSwitch:"EXTENSION_HUB_TOGGLE_SWITCH",hubCustomizeShortcut:"HUB_CUSTOMIZE_SHORTCUT",hubLoginButton:"HUB_LOGIN_BUTTON",hubUpgradeToProLink:"HUB_UPGRADE_TO_PRO_LINK",hubTryProLink:"HUB_TRY_PRO_LINK",settingsPageCustomizeShortcutButton:"SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON",hubFPTEnableCheckbox:"HUB_FPT_ENABLE_CHECKBOX",hubFPTDisableCheckbox:"HUB_FPT_DISABLE_CHECKBOX",deeplWriteIcon:"DEEPL_WRITE_ICON",gmailOnboardingPopup:"gmailOnboardingPopup",gmailOnboardingIcon:"gmailOnboardingIcon",gmailCharLimitLogin:"gmailCharLimitLogin",gmailFeedbackSurvey:"gmailFeedbackSurvey",hubViewIntegrations:"HUB_VIEW_INTEGRATIONS",hubCloseCustomizationsWidget:"HUB_CLOSE_CUSTOMIZATIONS_WIDGET",gslidesFeedbackSurvey:"GSLIDES_FEEDBACK_SURVEY",gslidesCharLimitLogin:"GSLIDES_CHAR_LIMIT_LOGIN",zendeskTryProLink:"ZENDESK_TRY_PRO_LINK"},m={triggerTranslation:"trigger-translation",changeLanguage:"change-language"},E={clickOnShortcutNotifiction:"CLICK_ON_SHORTCUT_NOTIFICATION",clickOnInlineTranslationShowAlternatives:"CLICK_ON_INLINE_TRANSLATION_SHOW_ALTERNATIVES",clickOnInlineTranslationCloseIcon:"CLICK_ON_INLINE_TRANSLATION_CLOSE_ICON",clickOnLogoutMenuEntry:"CLICK_ON_LOGOUT_MENU_ENTRY"},T={disablePerSite:"DISABLE_PER_SITE",disableEverywhere:"DISABLE_EVERYWHERE",enableEverywhere:"ENABLE_EVERYWHERE",enablePerSite:"ENABLE_PER_SITE"},f={inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",gdocs:"GDOCS"},_={top:1,right:2,bottom:3,left:4},w={openPage:"OPEN_PAGE",backButton:"BACK_BUTTON",nextButton:"NEXT_BUTTON",navigation:"NAVIGATION"},I={unspecified:0,chrome:1,edge:2,local:3,firefox:4},L={chrome:"cofdbpoegempjloogbagkncekinflcnj",edge:"fancfknaplihpclbhbpclnmmjcjanbaf",local:"ocpdpnakdghopjcifldjidbdmfobmmoi",firefox:"firefox-extension@deepl.com"},S={deepl:1,linguee:2,google_translate:3,word_365:4,power_point_365:5,jira:6,confluence:7,gmail:8},y=5,R={default:"DEFAULT",gdocs:"GDOCS",zendesk:"ZENDESK",whatsappWeb:"WHATSAPP_WEB",twitter:"TWITTER",gmail:"GMAIL",gslides:"GSLIDES",linkedIn:"LINKEDIN"},A={translate:"translate",write:"write"},N={user:"USER",extension:"EXTENSION"},C={OPEN_TICKET:"OPEN_TICKET",DETECT_TICKET_LANGUAGE:"DETECT_TICKET_LANGUAGE",SWITCH_TICKET_LANGUAGE:"SWITCH_TICKET_LANGUAGE",ENABLE_AUTOTRANSLATE:"ENABLE_AUTOTRANSLATE",DISABLE_AUTOTRANSLATE:"DISABLE_AUTOTRANSLATE",TRANSLATE_MESSAGE:"TRANSLATE_MESSAGE",TRANSLATE_INPUT:"TRANSLATE_INPUT",ERROR:"ERROR"},O={translation:"TRANSLATION",login:"LOGIN"},b={chat:"CHAT",message:"MESSAGE"},D={free:"free",pro:"pro",none:"none"},k={TEXT_REFINEMENT_REQUEST:"TEXT_REFINEMENT_REQUEST",GDOCS_INSERT_COPY:"GDOCS_INSERT_COPY",GDOCS_DISCARD_COPY:"GDOCS_DISCARD_COPY",GDOCS_CHAR_LIMIT_REACHED:"GDOCS_CHAR_LIMIT_REACHED",RESULT_ACCEPTED:"RESULT_ACCEPTED",RESULT_REVERTED:"RESULT_REVERTED",ERROR:"ERROR"},P={RESULT_ACCEPTED:"RESULT_ACCEPTED",RESULT_REVERTED:"RESULT_REVERTED",ERROR:"ERROR"},x={ALTERNATIVES_OPENED:"ALTERNATIVES_OPENED",SEGMENTATION_SELECTED:"SEGMENTATION_SELECTED",ALTERNATIVE_SELECTED:"ALTERNATIVE_SELECTED"},v={READING_VIEW_TRANSLATE:"READING_VIEW_TRANSLATE",COMPOSE_VIEW_TRANSLATE:"COMPOSE_VIEW_TRANSLATE",COMPOSE_VIEW_IMPROVE:"COMPOSE_VIEW_IMPROVE"},F={ANONYMOUS_USER_LIMIT_EXCEEDED:"ANONYMOUS_USER_LIMIT_EXCEEDED",FREE_ACCOUNT_LIMIT_EXCEEDED:"FREE_ACCOUNT_LIMIT_EXCEEDED"},U={PRO_TRIAL:"PRO_TRIAL",LOGIN:"LOGIN",SIGNUP:"SIGNUP"},G={WORD:"word",SENTENCE:"sentence"},M={none:"None",pro:"Pro",free:"Free"},W={share_feedback_survey:"DOCS_GOOGLE_COM_FEEDBACK_FORM",new_share_feedback_survey:"NEW_FEEDBACK_FORM",try_DeepL_Pro:"DEEPL_COM_PRO",show_more_translation:"DEEPL_COM_TRANSLATOR",deepl_translator_home:"DEEPL_COM_HOMEPAGE",deepl_write_home:"DEEPL_COM_WRITE",deepl_terms_of_service_free:"DEEPL_COM_TERMS_OF_SERVICE_FREE",deepl_translator_docs:"DEEPL_COM_DOCTRANS",shortcut_settings:"SHORTCUT_SETTINGS",support_article:"SUPPORT_ARTICLE",chrome_write_a_review:"CHROME_WRITE_A_REVIEW",edge_write_a_review:"EDGE_WRITE_A_REVIEW",gmail_feedback_survey:"GMAIL_FEEDBACK_SURVEY",gslides_feedback_survey:"GSLIDES_FEEDBACK_SURVEY",firefox_write_a_review:"FIREFOX_WRITE_A_REVIEW",external:{whatsapp:"EXTERNAL_WHATSAPP",twitter:"EXTERNAL_TWITTER",youtube:"EXTERNAL_YOUTUBE",facebook:"EXTERNAL_FACEBOOK",github:"EXTERNAL_GITHUB",discord:"EXTERNAL_DISCORD",telegram:"EXTERNAL_TELEGRAM",reddit:"EXTERNAL_REDDIT",gmail:"EXTERNAL_GMAIL",gdocs:"EXTERNAL_GDOCS",linkedIn:"EXTERNAL_LINKEDIN"},deepl_support:"DEEPL_SUPPORT",firefox_feedback_survey:"FIREFOX_FEEDBACK_SURVEY",firefox_shortcut_docs:"FIREFOX_SHORTCUT_DOCS"},V={DOCS_GOOGLE_COM_FEEDBACK_FORM:"https://deepl.typeform.com/to/MkMfP2Y6",NEW_FEEDBACK_FORM:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",DEEPL_COM_PRO:"https://www.deepl.com/pro",DEEPL_COM_TRANSLATOR:"https://www.deepl.com/translator",DEEPL_COM_WRITE:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW"}.deeplWrite,DEEPL_COM_DOCTRANS:"https://www.deepl.com/translator/files",DEEPL_COM_TERMS_OF_SERVICE_FREE:"https://www.deepl.com/en/pro-license?tab=free",SHORTCUT_SETTINGS:"chrome://extensions/shortcuts",SUPPORT_ARTICLE:"https://support.deepl.com/hc/articles/4407580229522",CHROME_WEBSTORE:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",FIREFOX_WEBSTORE:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",EDGE_WEBSTORE:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",GMAIL_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",GSLIDES_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",EXTERNAL:{WHATSAPP:"https://web.whatsapp.com",TWITTER:"https://www.twitter.com",YOUTUBE:"https://www.youtube.com",FACEBOOK:"https://www.facebook.com",GITHUB:"https://www.github.com",DISCORD:"https://www.discord.com",TELEGRAM:"https://web.telegram.org",REDDIT:"https://www.reddit.com",GMAIL:"https://www.gmail.com",GDOCS:"https://docs.google.com",LINKEDIN:"https://www.linkedin.com/"},DEEPL_SUPPORT:"https://support.deepl.com/hc",FIREFOX_FEEDBACK:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",FIREFOX_SHORTCUT_DOCS:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox"};function j(e){const{destination:t,...n}=e;if(void 0!==t)switch(t){case W.share_feedback_survey:return V.DOCS_GOOGLE_COM_FEEDBACK_FORM;case W.new_share_feedback_survey:return V.NEW_FEEDBACK_FORM;case W.try_DeepL_Pro:return n?.utmContent?q(V.DEEPL_COM_PRO,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):V.DEEPL_COM_PRO;case W.show_more_translation:return n?function({sourceLang:e,targetLang:t,textToShare:n}){if(!e||!t||!n)return"";const a=new URL(V.DEEPL_COM_TRANSLATOR);let r=`${e.toLowerCase()}/${t.toLowerCase()}/${encodeURIComponent(n)}`;return a.hash=r,a.href}(n):void console.error("Invalid action.");case W.deepl_translator_home:return n?.utmContent?q(V.DEEPL_COM_TRANSLATOR,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):V.DEEPL_COM_TRANSLATOR;case W.deepl_write_home:return n?.utmContent?q(V.DEEPL_COM_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):V.DEEPL_COM_WRITE;case W.deepl_translator_docs:return n?.utmContent?q(V.DEEPL_COM_DOCTRANS,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):V.DEEPL_COM_DOCTRANS;case W.deepl_terms_of_service_free:return V.DEEPL_COM_TERMS_OF_SERVICE_FREE;case W.shortcut_settings:return V.SHORTCUT_SETTINGS;case W.support_article:return V.SUPPORT_ARTICLE;case W.external.whatsapp:return V.EXTERNAL.WHATSAPP;case W.external.twitter:return V.EXTERNAL.TWITTER;case W.external.youtube:return V.EXTERNAL.YOUTUBE;case W.external.facebook:return V.EXTERNAL.FACEBOOK;case W.external.github:return V.EXTERNAL.GITHUB;case W.external.discord:return V.EXTERNAL.DISCORD;case W.external.telegram:return V.EXTERNAL.TELEGRAM;case W.external.reddit:return V.EXTERNAL.REDDIT;case W.external.gmail:return V.EXTERNAL.GMAIL;case W.external.gdocs:return V.EXTERNAL.GDOCS;case W.external.linkedIn:return V.EXTERNAL.LINKEDIN;case W.deepl_support:return V.DEEPL_SUPPORT;case W.chrome_write_a_review:return V.CHROME_WEBSTORE;case W.edge_write_a_review:return V.EDGE_WEBSTORE;case W.gmail_feedback_survey:return V.GMAIL_FEEDBACK_SURVEY;case W.gslides_feedback_survey:return V.GSLIDES_FEEDBACK_SURVEY;case W.firefox_write_a_review:return V.FIREFOX_WEBSTORE;case W.firefox_feedback_survey:return V.FIREFOX_FEEDBACK;case W.firefox_shortcut_docs:return V.FIREFOX_SHORTCUT_DOCS;default:return}}function B(e){const t=j(e);t&&chrome.tabs.create({url:H(t),active:!0})}function H(e){return new URL(e).href}function q(e,t){if(0===t.length||!e)return;const n=new URL(e);return t.forEach((e=>{2===e.length&&n.searchParams.append(e[0],e[1])})),n.href}const K=()=>{let e=navigator.languages?navigator.languages[0].substr(0,2).toUpperCase():"EN";var t;e="EN"===(t=e)?"EN-GB":"PT"===t?"PT-PT":t;return o.map((e=>e.langCode)).includes(e)?e:"EN"},X=()=>{const e={};return o.forEach((t=>{let n=t.langCode;["EN-GB","EN-US"].includes(n)&&(n="EN"),["PT-PT","PT-BR"].includes(n)&&(n="PT"),e[n]=0})),e},Y=e=>e.substring(0,2).toUpperCase();const $=e=>{let t=o.find((t=>t.langCode.toUpperCase()===e.toUpperCase()));return t||(t=o.find((t=>t.langCode.substring(0,2).toUpperCase()===e.substring(0,2).toUpperCase())),t)},z=()=>({settingSchemeVersion:2.8,blacklistDomains:[],blacklistDomainsForReading:[],blacklistDomainsForWriting:[],languagesForTranslation:o.reduce(((e,t)=>({...e,[t.langCode]:s})),{}),selectedTargetLanguage:K(),isTargetLanguageConfirmed:!1,deepLProApiKey:{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW"},APP_VERSION:"1.14.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0}}.DEEPL_PRO_API_KEY,installationId:n(),enableFullPageTranslation:!0,enableInputTranslation:!0,enableInlineTranslation:!0,languagePreferenceForWriting:X(),languagePreferenceForReading:X(),blacklistedPopupWidgets:[],successfulTranslations:0,isReviewPopupShown:!1,shouldDisplayFeedbackPopup:!1,isInputHighlighterShown:!1,isInlineHighlighterShown:!1,regionalVariant:void 0,isSurveyLinkHidden:!1,isZendeskOnboarded:!1,isZendeskEnabled:!0,isZendeskOnboardingShown:!1,zendeskFormality:"auto",zendeskSuccessfulTranslations:0,isGDocsOnboardingShown:!1,gDocsSegmentation:G.SENTENCE,isGmailEnabled:!0,wasGmailOnboardingShown:!1,successfulTranslationsGmail:0,wasGmailFeedbackPopupShown:!1,isGSlidesEnabled:!0,isGSlidesOnboardingShown:!1,wasGSlidesFeedbackPopupShown:!1,successfulTranslationsGSlides:0,customizationsActiveStates:{[R.linkedIn]:!0}}),Z={prod:"production",dev:"development",test:"testing"};function J(){return Z.prod}function Q(){return J()===Z.dev}function ee(e){chrome.runtime.sendMessage({action:"dlTrackError",errorMessage:e})}const te={PROTOCOL_ERROR:"PROTOCOL_ERROR",NETWORK_ERROR:"NETWORK_ERROR",FULL_PAGE_SERVER_ERROR:"FULL_PAGE_SERVER_ERROR",USER_UNAUTHORIZED:"-32003",USER_BLOCKED:"429",FORBIDDEN_REQUEST:"403",QUOTA_HAS_BEEN_REACHED:"1045601",TOO_MANY_REQUESTS:"1042902"},ne={ENTRY_NOT_FOUND:"ENTRY_NOT_FOUND",SERVER_ERROR:"SERVER_ERROR"},ae="INSTALLATION_ERROR",re="TRANSLATED_INPUT_NOT_SET",oe="FREE_ACCOUNT_LIMIT_EXCEEDED",se="ANONYMOUS_LIMIT_EXCEEDED";class ie extends Error{constructor(e){super(e),this.name=te.PROTOCOL_ERROR,this.message=e}}class ce extends Error{constructor(e){super(e),this.name=te.FULL_PAGE_SERVER_ERROR,this.message=e}}class le extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class de extends Error{constructor(e,t){super(t),this.name=oe,this.limit=e,this.message=t}}class ge extends Error{constructor(e,t){super(t),this.name=se,this.limit=e,this.message=t}}class ue extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}function pe(e){try{ee(`${e.name} ${e.message}`),console.error(e.name,e.message)}catch(e){console.error(e)}return{error:e.name}}function he(){return{url:"https://s.deepl.com/chrome/statistics"}}function me(e){switch(e){case i.manual:return 1;case i.automatic:return 2;case i.inline:return 3;case i.input:return 4;default:return 0}}function Ee(e){switch(e){case ne.ENTRY_NOT_FOUND:return 1;case ne.SERVER_ERROR:return 2}}function Te(e){switch(e){case d.defaultPopup:return g.extensionIcon;case d.fptInjectedPopup:return g.fptAutoInject;default:return 0}}function fe(e){switch(e){case d.defaultPopup:return u.defaultPopup;case d.fptInjectedPopup:return u.injectedFptPopup;case d.inlineTooltipPopup:return u.inlinePopup;default:return 0}}function _e(e){return e===p.hintKeyboardShortcut?1:0}function we(e){switch(e){case h.inputTranslationTriggerIcon:return 1;case h.inlineTranslationTriggerIcon:return 2;case h.inlineTranslationSettingPopup:return 3;case h.inputTranslationSettingPopup:return 4;case h.settingsPageFPT:return 5;case h.settingsPageReading:return 6;case h.settingsPageWriting:return 7;case h.fptHideModal:return 8;case h.inputTranslationSettingsIcon:return 9;case h.inlineTranslationSettingsIcon:return 10;case h.inputTranslationReadMoreLink:return 11;case h.inlineTranslationReadMoreLink:return 12;case h.fptTranslationReadMoreLink:return 13;case h.extensionHubToggleSwitch:return 14;case h.hubCustomizeShortcut:return 15;case h.hubLoginButton:return 16;case h.hubUpgradeToProLink:return 17;case h.hubTryProLink:return 18;case h.settingsPageCustomizeShortcutButton:return 19;case h.hubFPTEnableCheckbox:return 20;case h.hubFPTDisableCheckbox:return 21;case h.deeplWriteIcon:return 22;case h.hubViewIntegrations:return 23;case h.hubCloseCustomizationsWidget:return 24;case h.gmailOnboardingPopup:return 25;case h.gmailOnboardingIcon:return 26;case h.gmailCharLimitLogin:return 27;case h.gmailFeedbackSurvey:return 28;case h.gslidesFeedbackSurvey:return 29;case h.gslidesCharLimitLogin:return 30;case h.zendeskTryProLink:return 31;case h.settingsPageIntegrations:return 32;default:return 0}}function Ie(e){return e===m.triggerTranslation?1:0}function Le(e){switch(e){case E.clickOnShortcutNotifiction:return 60011;case E.clickOnInlineTranslationShowAlternatives:return 60026;case E.clickOnInlineTranslationCloseIcon:return 60027;case E.clickOnLogoutMenuEntry:return 60028;default:return 0}}function Se(e){switch(e){case f.inputTranslation:return 1;case f.inlineTranslation:return 2;case f.fullPageTranslation:return 3;default:return 0}}function ye(e){switch(e){case T.disableEverywhere:return 1;case T.disablePerSite:return 2;case T.enableEverywhere:return 3;case T.enablePerSite:return 4;default:return 0}}function Re(e){switch(e){case"top":return _.top;case"right":return _.right;case"bottom":return _.bottom;case"left":return _.left;default:return 0}}function Ae(e){switch(e){case W.shortcut_settings:return V.SHORTCUT_SETTINGS;case W.support_article:return V.SUPPORT_ARTICLE;case W.external.whatsapp:return V.EXTERNAL.WHATSAPP;case W.external.twitter:return V.EXTERNAL.TWITTER;case W.external.youtube:return V.EXTERNAL.YOUTUBE;case W.external.facebook:return V.EXTERNAL.FACEBOOK;case W.external.github:return V.EXTERNAL.GITHUB;case W.external.discord:return V.EXTERNAL.DISCORD;case W.external.telegram:return V.EXTERNAL.TELEGRAM;case W.external.reddit:return V.EXTERNAL.REDDIT;default:return""}}function Ne(e){switch(e){case w.openPage:return 1;case w.backButton:return 2;case w.nextButton:return 3;case w.navigation:return 4;default:return 0}}function Ce(e){switch(e){case L.chrome:return I.chrome;case L.edge:return I.edge;case L.firefox:return I.firefox;case L.local:return I.local;default:return I.unspecified}}function Oe(e){return S[e]||0}function be(e){switch(e){case R.default:return 1;case R.gdocs:return 2;case R.whatsappWeb:return 3;case R.twitter:return 4;case R.zendesk:return 5;case R.gmail:return 6;case R.gslides:return 7;case R.linkedIn:return 8;default:return 0}}function De(e){switch(e){case 60026:case 60027:return!0;default:return!1}}function ke(e){switch(e){case N.user:return 1;case N.extension:return 2;default:return 0}}function Pe(e){switch(e){case O.translation:return 1;case O.login:return 2;default:return 0}}function xe(e){switch(e){case b.message:return 1;case b.chat:return 2;default:return 0}}function ve(e){switch(e){case D.free:return 1;case D.pro:return 2;case D.none:return 3;default:return 0}}function Fe(e){switch(e){case v.READING_VIEW_TRANSLATE:return 1;case v.COMPOSE_VIEW_TRANSLATE:return 2;case v.COMPOSE_VIEW_IMPROVE:return 3;default:return 0}}function Ue(e){switch(e){case F.ANONYMOUS_USER_LIMIT_EXCEEDED:return 1;case F.FREE_ACCOUNT_LIMIT_EXCEEDED:return 2;default:return 0}}function Ge(e){switch(e){case A.translate:return 1;case A.write:return 2;default:return 0}}function Me(e){switch(e){case U.LOGIN:return 1;case U.SIGNUP:return 2;case U.PRO_TRIAL:return 3;default:return 0}}function We(e){switch(e){case G.WORD:return 1;case G.SENTENCE:return 2;default:return 0}}function Ve(e){switch(e){case M.none:return 1;case M.pro:return 2;case M.free:return 3;default:return 0}}const je={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function Be(e,t){let n;try{switch(e){case je.chrome:case je.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case je.edge:n=t.split("Edg/")[1].split(" ")[0];break;case je.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case je.opera:n=t.split("OPR/")[1].split(" ")[0];break;case je.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&navigator?.userAgentData&&function(e){return e===je.chrome||e===je.edge||e===je.brave||e===je.opera}(e)&&(n=He(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function He(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function qe(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let n="unknown_browser",a="unknown_browser_version";const r=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||He(je.edge),o=e.match(/firefox|fxios/i),s=e.match(/opr\//i)||He(je.opera),i=e.match(/safari/i),c=He(je.brave);t?(n=je.chrome,r&&(n=je.edge),s&&(n=je.opera),c&&(n=je.brave)):r?n=je.edge:o?n=je.firefox:s?n=je.opera:i&&(n=je.safari),a=Be(n,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:n,browserVersion:a,browserLang:r}}function Ke(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW"},APP_VERSION:"1.14.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW"},APP_VERSION:"1.14.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0}}.browserBuild.toLowerCase()===je.firefox.toLowerCase();const e=chrome.runtime.getURL("");return qe().browser===je.firefox||/moz-extension:\/\//gm.test(e)}async function Xe(e){let t,n,a,r,o,s,i,l,d=!1;try{const e=await pn(["session","installationId"]);n=e.session.id,t=e.installationId}catch(e){console.error(`DAP: Failed to fetch settings. Error: ${e.message}`)}try{const e=await Nn();d=!!e.accountId,a=ve(e.translatorServiceType),r=ve(e.apiServiceType),o=ve(e.docTranslatorServiceType),i=d?2===a||2===r||2===o?c.loggedInPro:c.loggedInFree:c.notLoggedIn,l=e.sessionType?Ve(e.sessionType):Ve(M.none)}catch(e){console.error(`DAP: Failed to fetch user information. Error: ${e.message}`)}try{s=await On()}catch(e){console.error(e)}const g=qe(),u=await Dn(),p={eventId:void 0,extensionVersion:"1.14.0",sessionId:n,sessionType:l,installationId:t,browserInstanceId:s,originStore:Ce(chrome.runtime.id),userInfos:{userType:i,translatorServiceType:a,apiServiceType:r,docTranslatorServiceType:o},userAgent:g.userAgent,platform:g.platform,browser:g.browser,browserVersion:g.browserVersion,browserLang:g.browserLang,clientExperiments:u},h=e?e(p):p;return fetch("https://s.deepl.com/chrome/statistics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(h)}).then((e=>{e.ok||console.log(`DAP ${h.eventId} request failed: ${e}`)}))}async function Ye(e){return Xe((t=>({...t,eventId:60001,translationRequestData:{extensionVersion:"1.14.0",domainName:e.domainName,userId:e.installationId,translationTrigger:me(e.trigger),translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},...e.translationPerformance&&{translationPerformance:e.translationPerformance},nicheIntegration:be(e.nicheIntegration||R.default)}})))}async function $e(e){return Xe((t=>({...t,eventId:60002,errorData:{extensionVersion:"1.14.0",errorCode:e.errorCode,errorMessage:e.errorMessage}})))}async function ze(e){return Xe((t=>({...t,eventId:60003,translationErrorData:{errorData:{extensionVersion:"1.14.0",errorCode:e.errorCode,errorMessage:e.errorMessage},targetLang:e.targetLang,domainName:e.domainName,websiteLanguage:e.websiteLanguage,sourceLength:e.characterCount,translationTrigger:me(e.trigger),nicheIntegration:be(e.nicheIntegration||R.default)}})))}async function Ze(e){return Xe((t=>({...t,eventId:60004,contentScriptErrorData:{errorData:{extensionVersion:"1.14.0",errorCode:e.errorCode,errorMessage:e.errorMessage},domainName:e.domainName}})))}async function Je(e){return Xe((t=>({...t,eventId:60005,inputInjectionData:{extensionVersion:"1.14.0",domainName:e.domainName}})))}async function Qe(e){return Xe((t=>({...t,eventId:60007,extensionOpenedData:{extensionVersion:"1.14.0",domainName:e.domainName,extensionOpenedFrom:e.extensionOpenedFrom}})))}async function et(e){return Xe((t=>({...t,eventId:60008,logoClickedData:{extensionVersion:"1.14.0",logoClickedFrom:e.logoClickedFrom}})))}async function tt(e){return Xe((t=>({...t,eventId:60009,notificationViewedData:{extensionVersion:"1.14.0",notificationType:_e(e.notificationType)}})))}async function nt(e){return Xe((t=>({...t,eventId:60010,shortcutUsedData:{shortcutType:Ie(e.shortcutType),uiLocation:we(e.location),shortcut:e.shortcut,nicheIntegration:be(e.nicheIntegration||R.default)}})))}async function at(e){const t={eventId:Le(e.uiAction)};return De(t.eventId)&&(t.payload={nicheIntegration:be(e.nicheIntegration||R.default)}),Xe((e=>({...e,...t})))}async function rt(){return Xe((e=>({...e,eventId:60012})))}async function ot(){return Xe((e=>({...e,eventId:60013})))}async function st(e){return Xe((t=>({...t,eventId:60014,inlineSettingOpenedData:{uiFunction:Se(e.uiFunction),uiLocation:we(e.uiLocation),nicheIntegration:be(e.nicheIntegration)}})))}async function it(e){return Xe((t=>({...t,eventId:60015,settingChangedData:{settingType:ye(e.settingType),uiFunction:Se(e.uiFunction),uiLocation:we(e.uiLocation),domainName:e.domainName}})))}async function ct(e){return Xe((t=>({...t,eventId:60016,detectLanguageData:{domainName:e.domainName,language:e.language}})))}async function lt(e){return Xe((t=>({...t,eventId:60017,rightClickData:{domainName:e.domainName,translationType:e.translationType}})))}async function dt(e){return Xe((t=>({...t,eventId:60018,inlinePositionChangeData:{newPosition:Re(e.newPosition)}})))}async function gt(e){return Xe((t=>({...t,eventId:60019,inlineDragStartData:{nicheIntegration:be(e?.nicheIntegration||R.default)}})))}async function ut(e){return Xe((t=>({...t,eventId:60020,whatsAppMessageTranslatedData:{messageLang:e.messageLang,targetLang:e.targetLang,messageLength:e.messageLength,translator:xe(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}})))}async function pt(e){return Xe((t=>({...t,eventId:60021,whatsAppMessageTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang,translator:xe(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}}})))}async function ht(e){return Xe((t=>({...t,eventId:60057,twitterTweetTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}async function mt(e){return Xe((t=>({...t,eventId:60022,fptHideData:{hideOption:e.hideOption,sourceLang:e.sourceLang,domainName:e.domainName,uiLocation:we(e.uiLocation)}})))}async function Et(e){return Xe((t=>({...t,eventId:60023,inlineCopyData:{targetLang:e.targetLang,targetLength:e.targetLength,nicheIntegration:be(e.nicheIntegration||R.default)}})))}async function Tt(e){return Xe((t=>({...t,eventId:60024,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,actionType:e.actionType,nicheIntegration:be(e.nicheIntegration||R.default)}})))}async function ft(e){return Xe((t=>({...t,eventId:60025,iconHoverData:{uiLocation:we(e.uiLocation),domainName:e.domainName,nicheIntegration:be(e.nicheIntegration||R.default)}})))}async function _t(e){return Xe((t=>({...t,eventId:60029,onboardingStepChangeData:{previousStep:e.previousStep,newStep:e.newStep,trigger:Ne(e.trigger),secondsOnOnboarding:e.secondsOnOnboarding,secondsOnPreviousStep:e.secondsOnPreviousStep}})))}async function wt(e){return Xe((t=>({...t,eventId:60030,onboardingOpenExternalPageData:{url:Ae(e.url)}})))}async function It(e){return Xe((t=>({...t,eventId:60031,readMoreClickedData:{uiLocation:we(e.uiLocation)}})))}async function Lt(e){return Xe((t=>({...t,eventId:60032,landOnWebsiteData:{website:Oe(e.website)}})))}async function St(e){return Xe((t=>({...t,eventId:60033,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,triggerType:e.triggerType,nicheIntegration:be(e.nicheIntegration||R.default)}})))}async function yt(e){return Xe((t=>({...t,eventId:60034,openInputHighlighterData:{domainName:e.domainName}})))}async function Rt(e){return Xe((t=>({...t,eventId:60035,closeInputHighlighterData:{trigger:e.trigger}})))}async function At(e){return Xe((t=>({...t,eventId:60036,gdocsReplaceTextData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength,targetLength:e.targetLength}})))}async function Nt(){return Xe((e=>({...e,eventId:60037})))}async function Ct(e){return Xe((t=>({...t,eventId:60038,openInputHighlighterData:{domainName:e.domainName}})))}async function Ot(e){return Xe((t=>({...t,eventId:60039,closeInputHighlighterData:{trigger:e.trigger}})))}async function bt(e){return Xe((t=>({...t,eventId:60040,dictionaryStatus:{status:e.status,langPair:e.langPair}})))}async function Dt(){return Xe((e=>({...e,eventId:60041})))}async function kt(){return Xe((e=>({...e,eventId:60042})))}async function Pt(e){return Xe((t=>({...t,eventId:60043,errorData:{lingueeError:Ee(e.error)}})))}async function xt(e,t){let n;switch(e){case C.OPEN_TICKET:n=60044;break;case C.DETECT_TICKET_LANGUAGE:n=60045;break;case C.SWITCH_TICKET_LANGUAGE:n=60046;break;case C.ENABLE_AUTOTRANSLATE:n=60047;break;case C.DISABLE_AUTOTRANSLATE:n=60048;break;case C.TRANSLATE_MESSAGE:n=60049;break;case C.TRANSLATE_INPUT:n=60050;break;case C.ERROR:n=60051;break;default:return}return Xe((e=>({...e,eventId:n,zendeskMetaData:{agentLanguage:t.agentLanguage,ticketLanguage:t.ticketLanguage,isTicketLanguageAutodetected:t.isTicketLanguageAutodetected,isTicketLanguageSupported:t.isTicketLanguageSupported,isAutoTranslateEnabled:t.isAutoTranslateEnabled,sourceTextLength:t.sourceTextLength,targetTextLength:t.targetTextLength,inputHasSelection:t.inputHasSelection,error:t.error}})))}async function vt(){return Xe((e=>({...e,eventId:60054})))}async function Ft(e){const t=Math.round(await Rn()/60);return Xe((n=>({...n,eventId:60055,logoutData:{trigger:ke(e.trigger),minutesSinceLastLogin:t,reason:e.reason}})))}async function Ut(e){return Xe((t=>({...t,eventId:60052,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}async function Gt(e){return Xe((t=>({...t,eventId:60053,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}async function Mt(e){return Xe((t=>({...t,eventId:60056,sessionTypeData:{sessionType:e.sessionType,trigger:Pe(e.trigger)}})))}async function Wt(e){let t="";try{t=await In()}catch(e){console.log(`DAP: Failed to fetch session type. Error: ${e.message}`)}return Xe((n=>({...n,eventId:60058,onboardingModalShownData:{nicheIntegration:be(e.nicheIntegration||R.default),sessionType:t}})))}async function Vt(e){return Xe((t=>({...t,eventId:60059,UILocationClickedData:{target:we(e)}})))}async function jt(){return Xe((e=>({...e,eventId:60060})))}async function Bt(){return Xe((e=>({...e,eventId:60061})))}async function Ht(e,t){let n;switch(e){case k.TEXT_REFINEMENT_REQUEST:n=60062;break;case k.GDOCS_INSERT_COPY:n=60063;break;case k.GDOCS_DISCARD_COPY:n=60064;break;case k.GDOCS_CHAR_LIMIT_REACHED:n=60065;break;case k.ERROR:n=60066;break;case k.RESULT_ACCEPTED:n=60071;break;case k.RESULT_REVERTED:n=60072;break;default:return}return Xe((e=>({...e,eventId:n,deeplWriteMetaData:{lang:t.lang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:be(t.nicheIntegration||R.default),error:t.error}})))}async function qt(){if(!await _n())return;const e=await bn();return Xe((t=>({...t,eventId:60067,accountData:{accountUuid:e}})))}async function Kt(){const e=await bn();return Xe((t=>({...t,eventId:60068,accountData:{accountUuid:e}})))}async function Xt(){const e=await bn();return Xe((t=>({...t,eventId:60069,accountData:{accountUuid:e}})))}async function Yt(e,t){let n;switch(e){case P.RESULT_ACCEPTED:n=60073;break;case P.RESULT_REVERTED:n=60074;break;default:return}return Xe((e=>({...e,eventId:n,translationResultActionData:{sourceLang:t.sourceLang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:be(t.nicheIntegration||R.default),error:t.error}})))}async function $t(e){return Xe((t=>({...t,eventId:60070,customizationOnOffData:{nicheIntegration:be(e.nicheIntegration||R.default),uiLocation:we(e.location),customizationEnabled:e.customizationEnabled}})))}async function zt(e){return Xe((t=>({...t,eventId:60075,gmailCharLimitReachedData:{gmailActionType:Fe(e.type)}})))}async function Zt(e){return Xe((t=>({...t,eventId:60076,upgradeNotificationDisplayedData:{type:Ue(e)}})))}async function Jt(e){return Xe((t=>({...t,eventId:60077,upgradeNotificationClosedData:{type:Ue(e)}})))}async function Qt(e,t){return Xe((n=>({...n,eventId:60078,upgradeNotificationActionData:{type:Ue(e),action:Me(t)}})))}async function en(e,t){let n;switch(e){case x.ALTERNATIVES_OPENED:n=60079;break;case x.SEGMENTATION_SELECTED:n=60080;break;case x.ALTERNATIVE_SELECTED:n=80081;break;default:return}return Xe((e=>({...e,eventId:n,alternativesMetaData:{sourceLang:t.sourceLang,targetLang:t.targetLang,nicheIntegration:be(t.nicheIntegration||R.default),contentProcessingMode:Ge(t.contentProcessingMode),...t.alternativesSegmentation&&{alternativesSegmentation:We(t.alternativesSegmentation)}}})))}let tn;const nn="dlBrowserExtension",an="dlCache";function rn(){return new Promise(((e,t)=>{let n=indexedDB.open(nn,1);n.onerror=function(){t("Error creating database.")},n.onsuccess=function(t){tn=t.target.result,e()},n.onupgradeneeded=function(t){tn=t.target.result,tn.objectStoreNames.contains(an)||tn.createObjectStore(an,{keyPath:"id"}),e()}}))}async function on(e,t,n){return tn||await rn(),new Promise(((a,r)=>{let o=tn.transaction(n,"readwrite").objectStore(n).put({id:e,data:t,meta:{createdAt:Date.now()}});o.onsuccess=function(){a()},o.onerror=function(e){r(e)}}))}async function sn(e,t){return tn||await rn(),new Promise(((n,a)=>{let r=tn.transaction(t,"readonly").objectStore(t).get(e);r.onerror=function(e){a(e)},r.onsuccess=function(){r.result?n(r.result):n(null)}}))}function cn(e){return on("dlclientstate",e,an)}async function ln(){const e=await sn("dlclientstate",an);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>20?void 0:e.data}function dn(e){return on("dlexperiments",e,an)}async function gn(){try{const e=await sn("dlexperiments",an);return e&&e.meta&&e.data?e.data:[]}catch(e){return[]}}async function un(){const e=await sn("dlexperiments",an);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>9||!e.data||0===e.data.length?void 0:e.data}async function pn(e){if(e.includes("session")){const e=await chrome.storage.sync.get(["session"]);e&&!e.session&&await hn()}return new Promise(((t,n)=>{chrome.storage.sync.get(e,(a=>{a?t(a):n(`Can not get ${e}`)}))}))}async function hn(){const e=n();await chrome.storage.sync.set({session:{id:e,timestamp:Date.now()}});try{await qt()}catch(e){console.error(e)}}async function mn(){const{session:e}=await pn(["session"]);!e||(Date.now()-e.timestamp)/6e4>30?await hn():await chrome.storage.sync.set({session:{...e,timestamp:Date.now()}})}async function En(e,t,n){const a=r(e);return await chrome.storage.local.set({a_t:e,r_t:t,i_t:n,isLoggedIn:!(!e||!t),isProUser:!(!a||"Pro"!==a.sessionType),sessionType:a?.sessionType}),a?.sessionType}async function Tn(){await chrome.storage.local.remove(["a_t","r_t","i_t"]),await chrome.storage.local.set({isLoggedIn:!1,isProUser:!1,sessionType:""})}async function fn(){const e=await chrome.storage.local.get(["a_t","r_t","i_t"]);return{access_token:e?e.a_t:void 0,refresh_token:e?e.r_t:void 0,id_token:e?e.i_t:void 0}}async function _n(){const e=await chrome.storage.local.get(["isLoggedIn"]);return!(!e||!e.isLoggedIn)}async function wn(){const e=await chrome.storage.local.get(["isProUser"]);return!(!e||!e.isProUser)}async function In(){const e=await chrome.storage.local.get(["sessionType"]);return e?.sessionType}async function Ln(){return(await chrome.storage.sync.get(["installationId"])).installationId}async function Sn(){await chrome.storage.local.set({last_login:Date.now()})}async function yn(){await chrome.storage.local.remove(["last_login"])}async function Rn(){const e=await chrome.storage.local.get(["last_login"]);return e&&e.last_login?(Date.now()-e.last_login)/1e3:0}async function An(e){const t=e.featureSet.translator.service,n=e.featureSet.api.service,a=e.featureSet.documentTranslation.service;let r,o;e.loginState?.accountId&&(r=e.loginState.accountId),e.featureSet?.integrations?.browserExtension&&(o=e.featureSet?.integrations?.browserExtension),await chrome.storage.local.set({translatorServiceType:t,apiServiceType:n,docTranslatorServiceType:a,accountId:r||"",featureSet:o})}async function Nn(){return await chrome.storage.local.get(["isLoggedIn","isProUser","sessionType","translatorServiceType","apiServiceType","docTranslatorServiceType","accountId"])}async function Cn(){await chrome.storage.local.set({browserInstanceId:n()})}async function On(){return(await chrome.storage.local.get(["browserInstanceId"])).browserInstanceId}async function bn(){const e=await chrome.storage.local.get(["accountId","a_t","i_t"]);if(e&&e.accountId)return e.accountId;if(e&&e.a_t){const t=r(e.a_t),n=r(e.i_t);return t.sub||n.sub}}async function Dn(){let e=[];try{e=await gn()}catch(e){}if(!e||0===e.length)return[];return e.map((e=>({id:e.id,variant:e.variant,breakout:e.breakout})))}async function kn(e="translatorServiceType"){const t=await Nn(),n=!!t.accountId,a=t[e];return n?a===D.pro?c.loggedInPro:c.loggedInFree:c.notLoggedIn}async function Pn(e="translatorServiceType"){switch(await kn(e)){case c.loggedInFree:return l.loggedInFree;case c.loggedInPro:return;case c.notLoggedIn:default:return l.notLoggedIn}}async function xn(e=!1){if(!e){let e;try{e=await un()}catch(e){}if(e)return e}const t=await Ln();if(!t)throw new Error("Installtion ID is not valid");let n=[];try{n=await gn()}catch(e){}const a=`https://s.deepl.com/chrome/experiments/${t}`;let r;try{const e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify(n)});if(r=(await e.json()).client_experiments,!r)return n;try{dn(r)}catch(e){}return r}catch(e){return n}}const vn={ACCESS_DENIED:"ACCESS_DENIED",INVALID_REQUEST:"INVALID_REQUEST",INVALID_GRANT:"INVALID_GRANT",GET_TOKEN_ERROR:"GET_TOKEN_ERROR",INVALID_NONCE:"INVALID_NONCE"};class Fn extends Error{constructor(e,t){super(e),this.name=vn.ACCESS_DENIED,this.message=e,this.httpStatusCode=t}}class Un extends Error{constructor(e,t){super(e),this.name=vn.INVALID_REQUEST,this.message=e,this.httpStatusCode=t}}class Gn extends Error{constructor(e,t){super(e),this.name=vn.INVALID_GRANT,this.message=e,this.httpStatusCode=t}}class Mn extends Error{constructor(e,t){super(e),this.name=vn.GET_TOKEN_ERROR,this.message=e,this.httpStatusCode=t}}class Wn extends Error{constructor(e){super(e),this.name=vn.INVALID_NONCE,this.message=e}}function Vn(e,t){const n=e.split("?")[1];if(n){var a=n.split("&");for(let e=0;e<a.length;e++){const n=a[e].split("=");if(decodeURIComponent(n[0])===t)return decodeURIComponent(n[1])}}}async function jn(e,t,n="https://test.deepl.com/oidc-login"){const r=a(),o=a(),s=await async function(e){const t=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(o);return{url:n+"?"+new URLSearchParams([["client_id",e],["redirect_uri",t],["code_challenge",s],["code_challenge_method","S256"],["nonce",r]]),nonce:r,codeVerifier:o}}function Bn(e,t){if(200!==e){if("invalid_request"===t.error)throw new Un(`dl-oidc (get tokens): invalid request - http status: ${e}`,e);if("invalid_grant"===t.error)throw new Gn(`dl-oidc (get tokens): invalid grant - http status: ${e}`,e);throw new Mn(`dl-oidc (get tokens): http status: ${e}`,e)}}async function Hn(e,t="https://deepl.com/oidc/token"){const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})}),a=await n.json();return Bn(n.status,a),a.access_token}async function qn(e,t,n=!1){let a=t.access_token;async function r(){return await fetch(e,{...t,headers:{...t.headers,Authorization:a?`Bearer ${a}`:"None"}})}n&&a&&(a=await Hn(t.refresh_token,t.token_url));let o=await r();return 401!==o.status&&403!==o.status||(a=await Hn(t.refresh_token,t.token_url),o=await r()),{response:o,accessToken:a}}function Kn(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}async function Xn(e=!1,n=!0){if(!e){const e=await ln();if(e)return e}const a=Kn("getClientState",{v:"20180814"},t()),o=await fn(),s=n||function(e){try{const t=r(e);if(t.exp&&Date.now()/1e3<t.exp-5)return!1}catch(e){console.error("Error decoding token:",e)}return!0}(o.access_token),{response:i,accessToken:c}=await qn("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(a),access_token:o.access_token,refresh_token:o.refresh_token,token_url:"https://w.deepl.com/oidc/token"},s);await En(c,o.refresh_token,o.id_token);const l=(await i.json()).result;return l&&(cn(l),An(l)),l}async function Yn(e=!1){const t=async()=>{const t=await jn("chromeExtension",chrome.identity.getRedirectURL(),"https://www.deepl.com/auth/login");return new Promise(((n,a)=>{chrome.identity.launchWebAuthFlow({interactive:!0,url:e?`${t.url}#error_loginfailed`:t.url},(async e=>{if(!e){const e=chrome.runtime.lastError.message;return console.error("response url undefined",e),ee(`login - response url undefined. ${e}`),/The user did not approve access/gm.test(e)||/User cancelled or denied access/gm.test(e)?n():a()}try{const a=await async function(e,t,n,a,o,s="https://deepl.com/oidc/token"){const i=Vn(n,"code");if(!i){const e=Vn(n,"error");if("access_denied"===e)throw new Fn("dl-oidc (get tokens): access denied - undefined code");if("invalid_request"===e)throw new Un("dl-oidc (get tokens): invalid request - undefined code")}const c=await fetch(`${s}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:e,code_verifier:o,code:i,grant_type:"authorization_code",redirect_uri:t})}),l=await c.json();if(Bn(c.status,l),r(l.id_token).nonce!==a)throw new Wn("dl-oidc (get tokens): invalid nonce");return l}("chromeExtension",chrome.identity.getRedirectURL(),e,t.nonce,t.codeVerifier,"https://w.deepl.com/oidc/token"),o=await En(a.access_token,a.refresh_token,a.id_token);try{await Xn(!0,!1),vt(),Kt(),o&&await Mt({sessionType:o,trigger:"LOGIN"})}catch(e){console.error(e)}await Sn(),n()}catch(e){console.error(e);try{$e({errorCode:e.name,errorMessage:e.message})}catch(e){console.error(e)}a(e)}}))}))};try{await t()}catch(e){Yn(!0)}}async function $n(e){const t=await fn(),n=`https://www.deepl.com/auth/logout?${new URLSearchParams([["id_token_hint",t.id_token],["post_logout_redirect_uri",chrome.identity.getRedirectURL()]])}`;chrome.identity.launchWebAuthFlow({url:n,interactive:!0},(async()=>{await yn();try{await Xt()}catch(e){console.error(e)}await Tn();try{await Ft({trigger:e.trigger,reason:e.reason})}catch(e){console.error(e)}await Xn(!0),e.showAlert&&chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlShowAlert",payload:{error:e.reason}})}))}))}async function zn(e,t,n,a){const r=await fn(),o=await wn();let s=r&&r.access_token&&o?"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0":"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0";a&&(s=r&&r.access_token&&o?"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0":"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0");try{const{response:a,accessToken:o}=await qn(s,{method:"POST",headers:{"Content-Type":t},body:e,access_token:r.access_token,refresh_token:r.refresh_token,token_url:"https://w.deepl.com/oidc/token"}),i=await En(o,r.refresh_token,r.id_token);if(i)try{await Mt({sessionType:i,trigger:"TRANSLATION"})}catch(e){console.log(e)}try{await Xn(!1,!1)}catch(e){console.error(`Failed to get the client state ${e.message}`)}let c=function(e,t,n){let a;try{a=JSON.parse(e)}catch(e){throw 200===t?new ie("JSON_RPC: Parsing of response object failed"):t>=500&&n?new ce(`FPT failed: Http status code ${t}`):new le(t.toString(),403===t?`Translation failed: Http status code ${t} forbidden request. re-authenticating makes no difference.`:`Translation failed: Http status code ${t}`)}if("2.0"!==a.jsonrpc||void 0!==a.result&&200!==t||void 0===a.result&&void 0===a.error)throw new ie("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(a.error){const e=a.error;if(void 0===e.code)throw new ie('JSON_RPC: Missing field "code" in error response');throw new le(e.code.toString(),e.message)}if(200!==t)throw new le(t.toString(),`Http status code ${t}`);return a}(await a.text(),a.status,n);return{data:c,status:a.status}}catch(e){throw e.name!==vn.ACCESS_DENIED&&e.name!==vn.INVALID_REQUEST&&e.name!==vn.INVALID_GRANT&&e.name!==te.USER_UNAUTHORIZED&&e.name!==te.FORBIDDEN_REQUEST||setTimeout((()=>{$n({trigger:N.extension,reason:e.name})}),5e3),e}}async function Zn(e,t,n=(e=>e),a,r,o){const s=function(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}(e,t,a),i=n(JSON.stringify(s),s);return(await zn(i,"application/json; charset=utf-8",r,o)).data.result}async function Jn(e){let t,n={};for(const t in e.weights)e.weights[t]>0&&(n[t]=e.weights[t]);try{t=await kn()}catch(e){t=c.notLoggedIn,console.log(e)}if(t!==c.loggedInPro&&e.nicheIntegration===R.default){const n=e.sourceTexts.reduce(((e,t)=>e+t.length),0),a=await Pn();if(t===c.loggedInFree&&n>a)throw new de(a,"Limit exceeded (free account). Please upgrade");if(t===c.notLoggedIn&&n>a)throw new ge(a,"Limit exceeded (anonymous user). Please upgrade")}let a=e.sourceTexts;const r=["EN-US","EN-GB","PT-PT","PT-BR"].includes(e.targetLangCode?.toUpperCase());let o=e.targetLangCode?.toUpperCase();r&&(o=e.targetLangCode?.toUpperCase().slice(0,2));const s={texts:e.isWriteRequest?e.sourceTexts.map((e=>({text:e,requestAlternatives:4}))):a.map((e=>({text:e}))),...e.isHtml&&{html:"enabled"},...!e.isHtml&&{splitting:e.splitting?e.splitting:"paragraphs"},lang:{target_lang:o,source_lang_user_selected:"auto"===e.sourceLang?"auto":e.sourceLang.toUpperCase(),preference:{weight:n}},commonJobParams:{regionalVariant:e.regionalVariant&&r?e.regionalVariant:void 0,...e.isWriteRequest&&{mode:"write"},...e.formality&&{formality:e.formality}}};let i=1;const l=Date.now();a.forEach((e=>i+=(e.match(/[i]/g)||[]).length)),s.timestamp=l-l%i+i;const d=await Zn("LMT_handle_texts",s,((e,t)=>e=(t.id+3)%13==0||(t.id+5)%29==0?e.replace('"method":"','"method" : "'):e.replace('"method":"','"method": "')),e.id,e.isHtml,e.isWriteRequest);return{texts:d.texts.map((e=>e.text)),sourceLang:d.lang.toUpperCase(),detectedLanguages:d.detectedLanguages}}const Qn=new Map([["ZH_EN","chinese-english"],["EN_ZH","english-chinese"],["NL_EN","dutch-english"],["EN_NL","english-dutch"],["FR_EN","french-english"],["EN_FR","english-french"],["FR_DE","french-german"],["DE_FR","german-french"],["FR_PT","french-portuguese"],["PT_FR","portuguese-french"],["FR_ES","french-spanish"],["ES_FR","spanish-french"],["DE_EN","german-english"],["EN_DE","english-german"],["DE_PT","german-portuguese"],["PT_DE","portuguese-german"],["DE_ES","german-spanish"],["ES_DE","spanish-german"],["IT_EN","italian-english"],["EN_IT","english-italian"],["JA_EN","japanese-english"],["EN_JA","english-japanese"],["PL_EN","polish-english"],["EN_PL","english-polish"],["PT_EN","portuguese-english"],["EN_PT","english-portuguese"],["PT_ES","portuguese-spanish"],["ES_PT","spanish-portuguese"],["RU_EN","russian-english"],["EN_RU","english-russian"],["ES_EN","spanish-english"],["EN_ES","english-spanish"]]);async function ea(e){const t=function(e,t){const n=`${e.toUpperCase()}_${t.toUpperCase()}`;return Qn.get(n)}(ta(e.sourceLang),ta(e.targetLang)),n=encodeURIComponent(e.text),a=`https://www-app.linguee.com/${t}/search?dlApp=BrowserExtension&il=${e.interfaceLang}&query=${n}`;let r=async function(e){let t;if(200!==e.status)throw 404===e.status?(console.error("Dictionary Entry not found: 404"),new ue(ne.ENTRY_NOT_FOUND)):(console.error("Dictionary Server Error"),new ue(ne.SERVER_ERROR));{try{t=await e.text()}catch(e){throw new ue(ne.SERVER_ERROR)}const n=/href=["']([^"']*)["']/g;t=t.replace(n,"")}return t}(await fetch(a));return r}function ta(e){return["EN-US","EN-GB","PT-PT","PT-BR"].includes(e)?["EN-US","EN-GB"].includes(e)?"EN":["PT-PT","PT-BR"].includes(e)?"PT":e:e}function na(e,t){const n=1e-5;return n*Math.floor((.97*e+t)/n)}const aa="PROTOCOL_ERROR",ra="FULL_PAGE_SERVER_ERROR",oa="-32003",sa="403";class ia extends Error{constructor(e){super(e),this.name=aa,this.message=e}}class ca extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class la extends Error{constructor(e){super(e),this.name=ra,this.message=e}}function da(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function ga(e,t){return{jsonrpc:"2.0",method:e,params:t,id:da()}}const ua={TRANSLATE:"translate",WRITE:"write"},pa="LMT_split_text",ha="LMT_handle_jobs";const ma=async({mode:e,texts:t,config:n,sourceLang:a="auto"})=>{const r=`${await fa(n,e)}&method=${pa}`,o=ga(pa,{commonJobParams:{mode:e},lang:{lang_user_selected:a},texts:t});return await Ta(r,{method:"POST",headers:{"Content-Type":"application/json"},body:wa(o)},n)},Ea=async({mode:e,jobs:t,sourceLang:n,targetLang:a,config:r})=>{const o=`${await fa(r,e)}&method=${ha}`,s=ga(ha,{commonJobParams:{mode:e},lang:{source_lang_computed:n,target_lang:a},jobs:t,priority:1,timestamp:_a(t)});return await Ta(o,{method:"POST",headers:{"Content-Type":"application/json"},body:wa(s)},r)},Ta=async(e,t,n)=>{const a=await n.auth.getAuthTokens(),r=a?{access_token:a.access_token,refresh_token:a.refresh_token,token_url:n.auth.tokenUrl}:{},{response:o,accessToken:s}=await qn(e,{...t,...r});return await n.auth.setAuthTokens(s,a.refresh_token,a.id_token),await Ia({response:o,isHtml:!1})},fa=async({auth:e,baseUrls:t},n)=>{const a=await e.getAuthTokens(),r=(e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}})(a.access_token),o=r&&"Pro"===r.sessionType,s=n===ua.WRITE?t.write:t.translate;return a.access_token&&o?s.pro:s.free},_a=e=>{const t=e.reduce(((e,t)=>[...e,...t.sentences.map((e=>e.text))]),[]);let n=1;const a=Date.now();return t.forEach((e=>n+=(e.match(/[i]/g)||[]).length)),a-a%n+n},wa=e=>{let t=JSON.stringify(e);return t=(e.id+3)%13==0||(e.id+5)%29==0?t.replace('"method":"','"method" : "'):t.replace('"method":"','"method": "'),t},Ia=async({response:e,isHtml:t})=>{let n;try{n=JSON.parse(await e.text())}catch(n){throw 200===e.status?new ia("JSON_RPC: Parsing of response object failed"):e.status>=500&&t?new la(`FPT failed: Http status code ${e.status}`):403===e.status?new ca(e.status.toString(),`Translation failed: Http status code ${e.status} forbidden request. re-authenticating makes no difference.`):new ca(e.status.toString(),`Translation failed: Http status code ${e.status}`)}if("2.0"!==n.jsonrpc||void 0!==n.result&&200!==e.status||void 0===n.result&&void 0===n.error)throw new ia("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(n.error){if(void 0===n.error.code)throw new ia('JSON_RPC: Missing field "code" in error response');throw new ca(n.error.code.toString(),n.error.message)}if(200!==e.status)throw new ca(e.status.toString(),`Http status code ${e.status}`);return n},La=ua;async function Sa({texts:e,mode:t=ua.TRANSLATE,targetLang:n}){return Aa((async a=>await async function({texts:e,mode:t=ua.TRANSLATE,targetLang:n,config:a}){const r=await ma({mode:t,texts:e,config:a}),o=r.result.texts[0].chunks.map(((e,n,a)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<a.length-1&&a.length>1?[a[n+1].sentences[0].text]:[],raw_en_context_before:n>0?[a[n-1].sentences[0].text]:[],sentences:[{...e.sentences[0],id:n}],...t===ua.WRITE&&{write_variant_requests:["main","variants"]}})));return await Ea({mode:t,jobs:o,sourceLang:r.result.lang.detected,targetLang:t===ua.WRITE?r.result.lang.detected:n,config:a})}({texts:e,mode:t,targetLang:n,config:a})))}const ya=async({mode:e,texts:t,sourceLang:n="auto"})=>Aa((async a=>await ma({mode:e,texts:t,sourceLang:n,config:a}))),Ra=async({mode:e,jobs:t,sourceLang:n,targetLang:a})=>Aa((async r=>await Ea({mode:e,jobs:t,sourceLang:n,targetLang:a,config:r}))),Aa=async e=>{try{return await e(Na())}catch(e){throw e.name!==vn.ACCESS_DENIED&&e.name!==vn.INVALID_REQUEST&&e.name!==vn.INVALID_GRANT&&e.name!==oa&&e.name!==sa||setTimeout((()=>{$n({trigger:N.extension,reason:e.name})}),5e3),e}},Na=()=>({baseUrls:{translate:{free:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",pro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0"},write:{free:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",pro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0"}},auth:{getAuthTokens:fn,setAuthTokens:En,tokenUrl:"https://w.deepl.com/oidc/token"}});async function Ca(e){const t=await pn(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:"dlTranslateInline",targetLang:t.selectedTargetLanguage})}async function Oa(e){await mn();const n=await pn(["selectedTargetLanguage","session","installationId","regionalVariant"]),a=new Date,r={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),isHtml:!0,sourceTexts:e.payload.texts,regionalVariant:n.regionalVariant};let o;try{o=await Jn(r)}catch(t){try{ze({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.sourceLang,trigger:e.payload.trigger,characterCount:e.payload.texts.reduce(((e,t)=>e+t.length),0)})}catch(e){console.log(e)}throw t}wr();const s={isFirstTime:e.payload.isFirstTime,processingTimeInMs:new Date-a};try{Ye({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.sourceLang,targetLanguage:n.selectedTargetLanguage,characterCount:e.payload.texts.reduce(((e,t)=>e+t.length),0),translationPerformance:s,domainName:e.payload.domainName})}catch(e){console.error(e)}return o.texts}async function ba(e){await mn();const n=await pn(["selectedTargetLanguage","session","installationId","languagePreferenceForReading","regionalVariant"]),a=e.payload.nicheIntegration||R.default,r={sourceLang:e.payload.sourceLang||"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:e.payload.requests.map((e=>e.text)),weights:n.languagePreferenceForReading,splitting:"newlines",regionalVariant:n.regionalVariant,nicheIntegration:a,isWriteRequest:e.payload.isWriteRequest};let o;try{o=await Jn(r)}catch(t){try{e.payload.isWriteRequest?Ht(k.ERROR,{lang:e.payload.websiteLanguage,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:a,error:t.name}):ze({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.websiteLanguage,trigger:e.payload.trigger,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}wr(),e.payload.platformBehavior===R.gslides&&Hr();try{if(o.detectedLanguages){for(const e in o.detectedLanguages)(n.languagePreferenceForReading[e]||0===n.languagePreferenceForReading[e])&&(n.languagePreferenceForReading[e]=na(n.languagePreferenceForReading[e],o.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForReading:n.languagePreferenceForReading})}}catch(e){console.error(e)}try{e.payload.isWriteRequest?Ht(k.TEXT_REFINEMENT_REQUEST,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:o.texts.reduce(((e,t)=>e+t.length),0),nicheIntegration:a}):Ye({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:o.sourceLang,targetLanguage:n.selectedTargetLanguage,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:a})}catch(e){console.error(e)}return o.texts.map((e=>({text:e,detected_source_language:o.sourceLang})))}async function Da(e){await mn();const n=await pn(["targetLanguageUserInput","session","installationId","languagePreferenceForWriting","regionalVariant"]),a=e.payload.requests,r=e.payload.targetLang||n.targetLanguageUserInput,o=e.payload.platformBehavior||R.default,s={sourceLang:"auto",targetLangCode:r,sessionId:n.session.id,id:t(),sourceTexts:a.map((e=>e.text))||[],weights:n.languagePreferenceForWriting,splitting:"paragraphs",regionalVariant:n.regionalVariant,nicheIntegration:o,...e.payload.isHtml&&{isHtml:e.payload.isHtml},...e.payload.formality&&{formality:e.payload.formality},...e.payload.isWriteRequest&&{isWriteRequest:e.payload.isWriteRequest}};let c;try{c=await Jn(s)}catch(t){try{e.payload.isWriteRequest?Ht(k.ERROR,{lang:e.payload.sourceLang,sourceLength:a.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:o,error:t.name}):ze({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:r,websiteLanguage:e.payload.websiteLanguage,trigger:i.input,characterCount:a.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}if(wr(),e.payload.platformBehavior===R.gmail?jr():e.payload.platformBehavior===R.gslides&&Hr(),c.sourceLang===n.targetLanguageUserInput&&a[0].text.length>15){let e;if("EN"===r)e="DE";else e="EN";let n=await Jn({...s,targetLangCode:e,id:t()});const a=await Jn({...s,sourceTexts:n.texts,id:t()});c.texts=a.texts}try{if(c.detectedLanguages){for(const e in c.detectedLanguages)(n.languagePreferenceForWriting[e]||0===n.languagePreferenceForWriting[e])&&(n.languagePreferenceForWriting[e]=na(n.languagePreferenceForWriting[e],c.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForWriting:n.languagePreferenceForWriting})}}catch(e){console.error(e)}if(!0!==e.payload.skipDapReporting)try{e.payload.isWriteRequest?Ht(k.TEXT_REFINEMENT_REQUEST,{lang:e.payload.sourceLang,sourceLength:a.reduce(((e,t)=>e+t.text.length),0),targetLength:c.texts.reduce(((e,t)=>e+t.length),0),nicheIntegration:o}):Ye({installationId:n.installationId,trigger:i.input,websiteLanguage:c.sourceLang,targetLanguage:r,characterCount:a.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:o})}catch(e){console.error(e)}return[{detected_source_language:c.sourceLang,text:c.texts[0],texts:c.texts}]}async function ka(e){await mn();const n=await pn(["targetLanguage","session","installationId","regionalVariant"]),a=e.payload.requests,r=e.payload.sourceLang,o=e.payload.targetLang||n.targetLanguage,s=R.gmail,c={sourceLang:r||"auto",targetLangCode:o,sessionId:n.session.id,id:t(),sourceTexts:a.map((e=>e.text))||[],splitting:"newlines",regionalVariant:n.regionalVariant};let l;try{l=await Jn(c)}catch(t){try{ze({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:o,trigger:i.input,characterCount:a.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}wr(),jr();try{Ye({installationId:n.installationId,trigger:i.manual,websiteLanguage:l.sourceLang,targetLanguage:o,characterCount:a.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:s})}catch(e){console.error(e)}return[{detected_source_language:l.sourceLang,text:l.texts[0],texts:l.texts}]}async function Pa(e){await mn();const n=await pn(["selectedTargetLanguage","session","installationId","regionalVariant"]),a=e.payload.message,r={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[a],splitting:"paragraphs",regionalVariant:n.regionalVariant};let o;try{o=await Jn(r)}catch(t){try{ht({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:a.length})}catch(e){console.log(e)}throw t}wr();try{Ye({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:a.length,domainName:e.payload.domainName,nicheIntegration:R.twitter})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,text:o.texts[0]}]}async function xa(e){await mn();const n=await pn(["selectedTargetLanguage","session","installationId","regionalVariant"]),a=e.payload.message,r={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[a],splitting:"paragraphs",regionalVariant:n.regionalVariant};let o;try{o=await Jn(r)}catch(t){try{ze({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.messageLang,characterCount:a.length,trigger:e.payload.trigger,nicheIntegration:R.linkedIn})}catch(e){console.log(e)}throw t}wr();try{Ye({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:a.length,domainName:e.payload.domainName,nicheIntegration:R.linkedIn})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,text:o.texts[0]}]}async function va(e){await mn();const n=await pn(["selectedTargetLanguage","session","installationId","regionalVariant"]),a=e.payload.message,r={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[a],splitting:"paragraphs",regionalVariant:n.regionalVariant};let o;try{o=await Jn(r)}catch(t){try{pt({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:a.length,numberOfLanguages:1,numberOfMessages:1,translator:b.message})}catch(e){console.log(e)}throw t}wr();try{ut({messageLang:e.payload.messageLang,targetLang:n.selectedTargetLanguage,messageLength:a.length,numberOfLanguages:1,numberOfMessages:1,translator:b.message}),Ye({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:a.length,domainName:e.payload.domainName,nicheIntegration:R.whatsappWeb})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,text:o.texts[0]}]}async function Fa(e){await mn();const n=await pn(["selectedTargetLanguage","session","installationId","regionalVariant"]),a=e.payload.messages,r={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:a,splitting:"paragraphs",regionalVariant:n.regionalVariant};let o;try{o=await Jn(r)}catch(t){try{pt({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:a.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:a.length,translator:b.chat})}catch(e){console.log(e)}throw t}wr();try{ut({messageLang:e.payload.messageLang,targetLang:n.selectedTargetLanguage,messageLength:a.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:a.length,translator:b.chat}),Ye({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:a.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:R.whatsappWeb})}catch(e){console.error(e)}return[{detected_source_language:o.sourceLang,texts:o.texts}]}async function Ua(e){const{texts:t,mode:n}=e.payload;return await ya({texts:t,mode:n})}async function Ga(e){await mn();const t=await pn(["session","installationId","regionalVariant"]),{mode:n,sentences:a,sourceLang:r,targetLang:o,domain:s}=e.payload,i=a.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<a.length-1?[a[t+1].text]:[],raw_en_context_before:t>0?[a[t-1].text]:[],sentences:[{...e,id:t+1}],...n===La.WRITE&&{write_variant_requests:["main"]}}))),c=new Date,l=await Ra({mode:n,jobs:i,sourceLang:r,targetLang:o});try{n===La.TRANSLATE&&Ye({installationId:t.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.sourceLang,targetLanguage:o,characterCount:a.map((e=>e.text)).reduce(((e,t)=>e+t.length),0),translationPerformance:{isFirstTime:!1,processingTimeInMs:new Date-c},domainName:s,nicheIntegration:R.gdocs})}catch(e){console.error(e)}return l}async function Ma(e){const{mode:t,sourceLang:n,targetLang:a,sentence:r,contextBefore:o,contextAfter:s}=e.payload,i=[{kind:"default",preferred_num_beams:4,raw_en_context_after:s?[s]:[],raw_en_context_before:o?[o]:[],sentences:[{...r,partial_translation:"",id:0}],...t===La.WRITE&&{write_variant_requests:["main","variants"]}}];return await Ra({mode:t,jobs:i,sourceLang:n,targetLang:a})}async function Wa(e){const{mode:t,sourceLang:n,targetLang:a,sentence:r,contextBefore:o,contextAfter:s,partialTranslation:i}=e.payload,c=[{kind:"alternatives_at_position",raw_en_context_after:s?[s]:[],raw_en_context_before:o?[o]:[],sentences:[{...r,partial_translation:i,id:0}],...t===La.WRITE&&{write_variant_requests:["main"]}}];return await Ra({mode:t,jobs:c,sourceLang:n,targetLang:a})}async function Va(e){const{mode:t,sourceLang:n,targetLang:a,sentence:r,contextBefore:o,contextAfter:s,partialTranslation:i}=e.payload,c=[{kind:"default",raw_en_context_after:s?[s]:[],raw_en_context_before:o?[o]:[],sentences:[{...r,partial_translation:i,id:0}],...t===La.WRITE&&{write_variant_requests:["main"]}}];return await Ra({mode:t,jobs:c,sourceLang:n,targetLang:a})}async function ja(e){await mn();const n=await pn(["session","installationId","regionalVariant"]),{sourceLang:a,targetLang:r,text:o,trigger:s}=e.payload;let i,c="";const l={sourceLang:a,targetLangCode:r,sessionId:n.session.id,id:t(),sourceTexts:[o],splitting:"paragraphs",regionalVariant:n.regionalVariant};let d;try{d=await Jn(l),c=d.texts?.[0]||""}catch(e){i=e.message}wr(),_r();try{Ye({installationId:n.installationId,trigger:s,websiteLanguage:a,targetLanguage:r,characterCount:o.length,nicheIntegration:R.zendesk})}catch(i){console.error(i)}return[c,i]}async function Ba(e){try{ct({language:e.payload.language,domainName:e.payload.domainName})}catch(e){console.error(e)}}async function Ha(e){try{Je({domainName:e})}catch(e){console.error(e)}}async function qa(e){try{Qe({domainName:e.domainName,extensionOpenedFrom:Te(e.extensionContext)})}catch(e){console.error(e)}}async function Ka(e){try{et({logoClickedFrom:fe(e.extensionContext)})}catch(e){console.error(e)}}async function Xa(){try{rt()}catch(e){console.error(e)}}async function Ya(){try{ot()}catch(e){console.error(e)}}async function $a(e){try{st({uiFunction:e.uiFunction,uiLocation:e.uiLocation,nicheIntegration:e.nicheIntegration||R.default})}catch(e){console.error(e)}}async function za(e){try{it({settingType:e.settingType,newValue:e.newValue,uiFunction:e.uiFunction,uiLocation:e.uiLocation,domainName:e.domainName})}catch(e){console.error(e)}}async function Za(e){try{lt({translationType:e.translationType,domainName:e.domainName})}catch(e){console.error(e)}}async function Ja(e){try{dt({newPosition:e.newPosition})}catch(e){console.error(e)}}async function Qa(e){try{gt(e)}catch(e){console.error(e)}}async function er(e){try{mt(e)}catch(e){console.error(e)}}async function tr(e){try{ft(e)}catch(e){console.error(e)}}async function nr(e){try{Et(e)}catch(e){console.error(e)}}async function ar(e){try{_t(e)}catch(e){console.error(e)}}async function rr(e){try{Tt(e)}catch(e){console.error(e)}}async function or(e){try{St(e)}catch(e){console.error(e)}}async function sr(e){try{wt(e)}catch(e){console.error(e)}}async function ir(e){try{It(e)}catch(e){console.error(e)}}async function cr(e){try{At(e)}catch(e){console.error(e)}}async function lr(e=!1){const t=await xn(e);return chrome.runtime.sendMessage({action:"dlExperimentsUpdated",payload:{experiments:[...t]}}),t}async function dr(){Yn()}async function gr(){$n({trigger:N.user})}async function ur(){return{isLoggedIn:await _n(),isProUser:await wn()}}async function pr(e){switch(e.type){case p.hintKeyboardShortcut:{const e=await chrome.storage.sync.get(["notificationsViewed"]);if(e.notificationsViewed&&e.notificationsViewed.hintKeyboardShortcut)return;await chrome.storage.sync.set({notificationsViewed:{...e.notificationsViewed,hintKeyboardShortcut:!0}});break}}try{tt({notificationType:e.type})}catch(e){console.error(e)}const t=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,{action:"dlShowNotification",payload:e})}async function hr(){return await chrome.commands.getAll()}async function mr(e){const t=await hr();try{nt({shortcutType:e.shortcutType,location:e.location,shortcut:t.filter((t=>t.name===e.shortcutType))[0].shortcut,nicheIntegration:e.nicheIntegration||R.default})}catch(e){console.error(e)}}async function Er(e){at({uiAction:e.uiAction,nicheIntegration:e.nicheIntegration||R.default})}function Tr(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlTranslateSelectionRightClick",payload:e})}))}async function fr(e){try{Lt(e)}catch(e){console.error(e)}}async function _r(){const e=(await chrome.storage.sync.get(["zendeskSuccessfulTranslations"])).zendeskSuccessfulTranslations+1;await chrome.storage.sync.set({zendeskSuccessfulTranslations:e})}async function wr(){const e=await chrome.storage.sync.get(["isReviewPopupShown","successfulTranslations"]),t=e.successfulTranslations+1;let n=e.isReviewPopupShown;if(!n&&t>=y){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowAskForAReviewPopup"}),n=!0}await chrome.storage.sync.set({isReviewPopupShown:n,successfulTranslations:t})}async function Ir(e,t){let n=$(e.lang);if(Ke())await function(e,t,n){const a=new SpeechSynthesisUtterance(e);a.lang=t,a.onend=function(){n()},speechSynthesis.speak(a)}(e.text,n.langCodeForSpeech,(()=>{chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"})}));else{const a={lang:n.langCodeForSpeech,onEvent:function(e){"end"===e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"}),"error"==e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverErrorOccurred"})}};(function(){const e=navigator?.userAgentData?.platform||navigator?.platform||void 0;return e&&-1!==e?.toUpperCase().indexOf("MAC")})()&&(a.rate=.9,n.voice&&L.chrome===chrome.runtime.id&&(a.voiceName=n.voice)),await chrome.tts.speak(e.text,a)}}async function Lr(){let e;return e=Ke()?await new Promise(((e,t)=>{if("speechSynthesis"in window){const t=speechSynthesis.getVoices();t.length>0?e(t):speechSynthesis.onvoiceschanged=()=>{const t=speechSynthesis.getVoices();e(t)}}else t(new Error("SpeechSynthesis not supported"))})):await chrome.tts.getVoices(),e.map((e=>Y(e.lang)))}async function Sr(){if(!Ke())return chrome.tts.stop();speechSynthesis.cancel()}async function yr(e){try{yt(e)}catch(e){console.error(e)}}async function Rr(e){try{Ct(e)}catch(e){console.error(e)}}async function Ar(e){try{Rt(e)}catch(e){console.error(e)}}async function Nr(e){try{Ot(e)}catch(e){console.error(e)}}async function Cr(e){return await ea(e)}async function Or(e){try{bt(e)}catch(e){console.error(e)}}async function br(e){try{Dt()}catch(e){console.error(e)}}async function Dr(e){try{kt()}catch(e){console.error(e)}}async function kr({eventType:e,zendeskMetaData:t}){try{xt(e,t)}catch(e){console.error(e)}}async function Pr(e){try{Pt(e)}catch(e){console.error(e)}}async function xr(e){try{Ut(e)}catch(e){console.error(e)}}async function vr(e){try{Gt(e)}catch(e){console.error(e)}}async function Fr(e){try{Wt(e)}catch(e){console.error(e)}}async function Ur(e){try{Vt(e)}catch(e){console.error(e)}}async function Gr({eventType:e,deeplWriteMetaData:t}){try{Ht(e,t)}catch(e){console.error(e)}}async function Mr(e){await mn();const n=await pn(["selectedTargetLanguage","session"]),a=e.payload.requests,r={sourceLang:e.payload?.sourceLang?e.payload.sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:a.map((e=>e.text))||[],isWriteRequest:!0,...e.payload.isHtml&&{isHtml:!0}};let o;return o=await Jn(r),[{detected_source_language:o.sourceLang,text:o.texts[0],texts:o.texts}]}async function Wr({eventType:e,acceptOrRevertMetadata:t}){try{Yt(e,t)}catch(e){console.error(e)}}async function Vr(e){try{$t(e)}catch(e){console.error(e)}}async function jr(){const e=await chrome.storage.sync.get(["wasGmailFeedbackPopupShown","successfulTranslationsGmail"]),t=e.successfulTranslationsGmail+1;let n=e.wasGmailFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowGmailFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGmailFeedbackPopupShown:n,successfulTranslationsGmail:t})}async function Br(e){try{zt(e)}catch(e){console.error(e)}}async function Hr(){const e=await chrome.storage.sync.get(["wasGSlidesFeedbackPopupShown","successfulTranslationsGSlides"]),t=e.successfulTranslationsGSlides+1;let n=e.wasGSlidesFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowSlidesFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGSlidesFeedbackPopupShown:n,successfulTranslationsGSlides:t})}async function qr({eventType:e,alternativesMetaData:t}){try{en(e,t)}catch(e){console.error(e)}}async function Kr(e=!1,t=!0){let n;try{n=await Xn(e,t)}catch(e){throw e.name===vn.INVALID_GRANT&&$n({trigger:N.extension,reason:e.name,showAlert:!0}),e}return n}async function Xr(){return await Pn()}function Yr(e){try{Zt(e)}catch(e){console.error(e)}}function $r(e){try{Jt(e)}catch(e){console.error(e)}}function zr(e,t){try{Qt(e,t)}catch(e){console.error(e)}}async function Zr({text:e}){return await Sa({texts:[e],targetLang:"EN",mode:La.WRITE})}const Jr={syncExperiments:"sync_experiments",syncClientState:"sync_client_state"};function Qr(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const eo={developer_tools:"DEVELOPER_TOOLS",settings_page:"SETTINGS_PAGE",settings_writing:"SETTINGS_WRITING",settings_reading:"SETTINGS_READING",settings_customizations:"SETTINGS_CUSTOMIZATIONS",onboarding:"ONBOARDING",firefox_first_run:"FIREFOX_FIRST_RUN",privacy_policy:"PRIVACY_POLICY"},to={DEVELOPER_TOOLS:"dev-page.html",SETTINGS_PAGE:"settings.html",SETTINGS_READING:"settings.html#inline-translation",SETTINGS_WRITING:"settings.html#input-translation",SETTINGS_CUSTOMIZATIONS:"settings.html#customizations",ONBOARDING:"onboarding.html",ONBOARDING_FIREFOX:"onboarding-firefox.html",FIREFOX_FIRST_RUN:"firefox-first-run.html",PRIVACY_POLICY:"privacy-policy.html"};function no({payload:e}){const{destination:t}=e;if(void 0===t)return;let n="";switch(t){case eo.developer_tools:n=ao(to.DEVELOPER_TOOLS);break;case eo.settings_page:n=ao(to.SETTINGS_PAGE);break;case eo.settings_writing:n=ao(to.SETTINGS_WRITING);break;case eo.settings_reading:n=ao(to.SETTINGS_READING);break;case eo.settings_customizations:n=ao(to.SETTINGS_CUSTOMIZATIONS);break;case eo.onboarding:n=Ke()?ao(to.ONBOARDING_FIREFOX):ao(to.ONBOARDING);break;case eo.firefox_first_run:n=ao(to.FIREFOX_FIRST_RUN);break;case eo.privacy_policy:n=ao(to.PRIVACY_POLICY)}n&&chrome.tabs.create({url:n,active:!0})}function ao(e){return chrome.runtime.getURL(e)}function ro(e,t,n){switch(Q()&&console.log(t.tab?`message from a content script: ${t.tab.url} with tab id: ${t.tab.id}. action: ${e.action}`:`message from the extension with action: ${e.action}`),e.action){case"dlRequestHtmlTranslation":Oa(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestInlineTranslation":ba(e).then((e=>{n(e)})).catch((e=>{n(pe(e))}));break;case"dlTriggerTranslateInline":Ca(t.tab.id);break;case"dlRequestInputTranslation":Da(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestGmailReceivedEmailTranslation":ka(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestWhatsAppMessageTranslation":va(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestTwitterTweetTranslation":Pa(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestLinkedInPostTranslation":xa(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestZendeskMessageTranslation":ja(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestWhatsAppMessagesTranslation":Fa(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestGDocsSplitText":Ua(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestGDocsProcessContent":Ga(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestGDocsSentenceAlternatives":Ma(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestGDocsWordAlternatives":Wa(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlRequestGDocsSentenceFromPartialTranslation":Va(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlTrackDetectLanguage":Ba(e),n();break;case"dlRequestLogin":dr().then((()=>n(!0))).catch((e=>{n(pe(e))}));break;case"dlRequestLogout":gr().then((()=>n(!0))).catch((e=>{n(pe(e))}));break;case"dlGetAppSettings":chrome.storage.sync.get(null,(function(e){n(e)}));break;case"dlUpdateAppSettings":chrome.storage.sync.set(e.payload,(function(){n(e.payload)}));break;case"dlTranslatedInputTextNotSet":Ze({errorCode:re,errorMessage:"The translated text could not be set",domainName:e.payload}),n();break;case"dlGetUserState":ur().then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlExternalURLRedirect":B(e.payload),n();break;case"dlOpenInternalPage":no(e),n();break;case"dlTrackInputTranslationInjection":Ha(e.payload),n();break;case"dlTrackExtensionOpenedEvent":qa(e.payload),n();break;case"dlTrackLogoClickedEvent":Ka(e.payload),n();break;case"dlTrackDocTransClick":Xa(),n();break;case"dlTrackRecommendToAFriendClick":Ya(),n();break;case"dlSendNotification":pr(e.payload),n();break;case"dlCheckCommandShortcuts":hr().then((e=>n(e)));break;case"dlTrackUseOfShortcut":mr(e.payload),n();break;case"dlTrackUiAction":Er(e.payload),n();break;case"dlTrackInlineSettingOpened":$a(e.payload),n();break;case"dlTrackSettingChanged":za(e.payload),n();break;case"dlTrackUILocationClicked":Ur(e.payload),n();break;case"dlTrackRightClick":Za(e.payload),n();break;case"dlTrackInlinePositionChange":Ja(e.payload),n();break;case"dlTrackInlineDragStart":Qa(),n();break;case"dlTrackFptHide":er(e.payload);break;case"dlTrackInlineCopy":nr(e.payload),n();break;case"dlTrackInlineListen":rr(e.payload),n();break;case"dlTrackIconHover":tr(e.payload),n();break;case"dlTrackVoiceOverStops":or(e.payload),n();break;case"dlTrackOnboardingStepChange":ar(e.payload),n();break;case"dlTrackOnboardingOpenExternalLink":sr(e.payload),n();break;case"dlTrackReadMore":ir(e.payload),n();break;case"dlTrackLandingOnWebsite":fr(e.payload),n();break;case"dlTrackGDocsReplaceText":cr(e.payload),n();break;case"dlGetExperiments":lr(e.payload?.forceFetch).then((e=>n(e))).catch((e=>n(e)));break;case"dlGetClientState":Kr(e.payload?.forceFetch).then((e=>n(e))).catch((e=>n(e)));break;case"dlTextToSpeech":Ir(e.payload,t.tab.id).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlGetDictionary":Cr(e.payload).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlGetSupportedVoices":Lr(e.payload).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlStopSpeech":Sr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackOpenInputHighlighter":yr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackOpenInlineHighlighter":Rr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackCloseInputHighlighter":Ar(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackCloseInlineHighlighter":Nr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackDictionaryStatus":Or(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackOpenDictionarySection":br(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackDisabledDictionaryHover":Dr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackZendeskCustomizationEvent":kr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackDeeplWriteEvent":Gr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackLingueeErrorData":Pr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackGdocsMaxCharExceededShown":xr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackGDocsMaxCharExceededTryProClicked":vr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackOnboardingModalShown":Fr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlRequestImproveWriting":Mr(e).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlTrackTranslateAcceptOrRevertEvent":Wr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackCustomizationEnabledEvent":Vr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTrackGmailCharLimitReached":Br(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlGetUsersCharacterLimit":Xr().then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlTrackAlternativesEvent":qr(e.payload).then((()=>n())).catch((e=>{n(pe(e))}));break;case"dlTestClassicAPI":Zr(e.payload).then((e=>n(e))).catch((e=>{n(pe(e))}));break;case"dlOnSuccessfulZendeskTranslation":_r();break;case"dlTrackUpgradeNotificationIsDisplayed":Yr(e.payload.type);break;case"dlTrackUpgradeNotificationClosed":$r(e.payload.type);break;case"dlTrackUpgradeNotificationAction":zr(e.payload.type,e.payload.cta)}return!0}function oo(e){switch(console.log(`Command "${e}" triggered`),e){case m.triggerTranslation:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlTriggerTranslationShortcut"})}));break;case m.changeLanguage:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlChangeLanguageShortcut"})}))}}function so(e){try{Kr(!0),chrome.runtime.setUninstallURL("https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU"),e.reason===chrome.runtime.OnInstalledReason.UPDATE&&console.log(`Update from version ${e.previousVersion} to ${chrome.runtime.getManifest().version} was completed`),async function(){let e=!1;const t=await chrome.storage.sync.get(null),n=z();if(!t||!t.settingSchemeVersion||t.settingSchemeVersion<n.settingSchemeVersion){let a={};for(const[r,o]of Object.entries(n))r in t&&"settingSchemeVersion"!==r?a[r]=t[r]:("installationId"===r&&(e=!0),a[r]=o);await chrome.storage.sync.clear(),await chrome.storage.sync.set(a),console.log("settings set: ",a)}return{installationIdWasSet:e}}().then((t=>{!async function(e,t){const n=await On();n||e!==chrome.runtime.OnInstalledReason.INSTALL?n||await Cn():(await Cn(),Nt(),Bt());t&&jt()}(e.reason,t.installationIdWasSet)})).finally((()=>{try{lr(!0),async function(){await chrome.alarms.clearAll(),await chrome.alarms.create(Jr.syncExperiments,{delayInMinutes:10,periodInMinutes:10}),await chrome.alarms.create(Jr.syncClientState,{delayInMinutes:30,periodInMinutes:30})}()}catch(e){console.error(e)}})),e.reason===chrome.runtime.OnInstalledReason.INSTALL&&J()!==Z.test&&(Ke()?no({payload:{destination:eo.firefox_first_run}}):no({payload:{destination:eo.onboarding}})),chrome.contextMenus.removeAll((function(){chrome.contextMenus.create({type:"normal",id:"dlChangeLanguageShortcut",title:chrome.i18n.getMessage("extension_settings_keyboard_shortcut_change_language"),checked:!1,contexts:["all"]},(function(){})),chrome.contextMenus.create({type:"normal",id:"dlTranslateInline",title:chrome.i18n.getMessage("context_menus_translate_section"),checked:!1,contexts:["all"]})})),chrome.tabs.query({},(function(e){for(const t of e)Qr(t)&&chrome.scripting.executeScript({target:{tabId:t},files:["build/content.js"]})}))}catch(e){$e({errorCode:ae,errorMessage:e.message})}}function io(e){switch(e.name){case Jr.syncExperiments:lr();break;case Jr.syncClientState:Kr()}}function co(e){switch(e.menuItemId){case"dlTranslateInline":Tr(!1);break;case"dlChangeLanguageShortcut":Tr(!0)}}function lo(){}const go={setBrowserExtensionUserAgent:{type:"modifyHeaders",requestHeaders:[{header:"user-agent",operation:"set",value:`DeepLBrowserExtension/1.14.0 ${navigator.userAgent} `}]}},uo={lingueeDomainFilter:{excludedDomains:["linguee.com"],urlFilter:"*://www-app.linguee.com*",resourceTypes:["xmlhttprequest"]},deeplToolingApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://*.deepl.com/jsonrpc?client=chrome-extension,*",resourceTypes:["xmlhttprequest"]},deeplStatisticsDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://s.deepl.*/chrome/statistics*",resourceTypes:["xmlhttprequest"]}};function po(){if(chrome.declarativeNetRequest)chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[2,3,4],addRules:[{id:2,priority:1,action:go.setBrowserExtensionUserAgent,condition:uo.lingueeDomainFilter},{id:3,priority:1,action:go.setBrowserExtensionUserAgent,condition:uo.deeplToolingApiDomainFilter},{id:4,priority:1,action:go.setBrowserExtensionUserAgent,condition:uo.deeplStatisticsDomainFilter}]},(async e=>{await console.log("created",e)}));else if(chrome.webRequest?.onBeforeSendHeaders){const e=Q()?"https://test.deepl.com/":"https://www.deepl.com/";browser.webRequest.onBeforeSendHeaders.addListener((t=>{const n=t.requestHeaders;return n.push({name:"Referer",value:e}),{requestHeaders:n}}),{urls:["*://*.deepl.com/jsonrpc?client=chrome-extension,*"]},["requestHeaders","blocking"]),browser.webRequest.onBeforeSendHeaders.addListener((function(e){for(const t of e.requestHeaders)if("User-Agent"===t.name){t.value=`DeepLBrowserExtension/1.14.0 ${navigator.userAgent}`;break}return{requestHeaders:e.requestHeaders}}),{urls:["*://www-app.linguee.com/*","*://*.deepl.com/jsonrpc?client=chrome-extension,*","https://s.deepl.com/chrome/statistics"]},["blocking","requestHeaders"])}}return po(),chrome.runtime.onInstalled.addListener(so),chrome.contextMenus.onClicked.addListener(co),chrome.tabs.onActivated.addListener((async function(e){Qr((await chrome.tabs.get(e.tabId)).url)&&chrome.tabs.sendMessage(e.tabId,{action:"dlTabChanged"}),chrome.tabs.query({},(function(t){for(var n=0;n<t.length;++n)chrome.tabs.sendMessage(t[n].id,{action:"dlChangeActiveTabStatus",payload:{isActive:t[n].id===e.tabId}})})),Kr()})),chrome.runtime.onConnect.addListener((e=>{Q()&&console.log(`port connected to tab with id: ${e.sender.tab.id}`)})),chrome.runtime.onMessage.addListener(ro),chrome.storage.onChanged.addListener(lo),chrome.commands.onCommand.addListener(oo),chrome.alarms.onAlarm.addListener(io),self.addEventListener("error",(function(e){ee(e.message)})),chrome.runtime.onMessage.addListener((e=>{"reload"===e&&chrome.tabs.query({active:!0}).then((()=>{chrome.runtime.reload(),chrome.tabs.reload()}))})),e.CONTENT_PROCESS_MODE=La,e.INTERNAL_PAGE_KEYS=eo,e.PERODIC_CODE_EXECUTION_NAMES=Jr,e.URL_ACTIONS=W,e.URL_LIST=V,e.cacheClientState=cn,e.cacheExperiments=dn,e.checkCommandShortcuts=hr,e.clearLoginTimestamp=yn,e.commandListener=oo,e.connectDatabase=rn,e.deleteAuthTokens=Tn,e.fetchClientState=Xn,e.fetchExperiments=xn,e.fetchGDocsSentenceAlternatives=Ma,e.fetchGDocsWordAlternatives=Wa,e.getAccountID=bn,e.getAuthTokens=fn,e.getBrowserInstanceId=On,e.getCachedClientState=ln,e.getCachedExperiments=un,e.getCharacterLimit=Pn,e.getClientState=Kr,e.getCurrentExperiments=gn,e.getDapAlternativesSegmentationType=We,e.getDapApiConfig=he,e.getDapApiExtensionOpenedFromId=Te,e.getDapApiInlinePositionType=Re,e.getDapApiLingueeError=Ee,e.getDapApiLogoClickedFromId=fe,e.getDapApiNotificationType=_e,e.getDapApiSettingType=ye,e.getDapApiShortcutTypes=Ie,e.getDapApiTranslationTriggerId=me,e.getDapApiUiActionEventId=Le,e.getDapApiUiFunctionality=Se,e.getDapApiUiLocation=we,e.getDapContentProcessingModeType=Ge,e.getDapGmailActionType=Fe,e.getDapLogoutTrigger=ke,e.getDapNicheIntegration=be,e.getDapOnboardingExternalLink=Ae,e.getDapOnboardingStepChangeTrigger=Ne,e.getDapOriginStore=Ce,e.getDapServiceLevel=ve,e.getDapSessionType=Ve,e.getDapSessionTypeTrigger=Pe,e.getDapUpgradeNotificationAction=Me,e.getDapUpgradeNotificationType=Ue,e.getDapWhatsAppTranslator=xe,e.getDictionary=Cr,e.getExperiments=lr,e.getExperimentsData=Dn,e.getExternalUrl=j,e.getInstallationId=Ln,e.getSecondsSinceLastLogin=Rn,e.getSessionType=In,e.getSettings=pn,e.getSupportedVoices=Lr,e.getUserInfo=Nn,e.getUserState=ur,e.getUserType=kn,e.getUsersCharacterLimit=Xr,e.getWebsiteIdFromWebsite=Oe,e.handleJobs=Ra,e.handleSuccessfulGmailTranslationsCount=jr,e.handleSuccessfulGslidesTranslationsCount=Hr,e.handleSuccessfulZendeskTranslationsCount=_r,e.improveWriting=Mr,e.isPayloadNecessaryForUIEvent=De,e.isProUser=wn,e.isUserLoggedIn=_n,e.jsonrpc_callFunction=Zn,e.jsonrpc_composeMethodCallDict=Kn,e.listenToPerodicCodeExecution=io,e.login=Yn,e.loginRequest=dr,e.logout=$n,e.logoutRequest=gr,e.markLoginTimestamp=Sn,e.messageListener=ro,e.onContextMenuClicked=co,e.onInstalled=so,e.onStorageChanged=lo,e.openInternalPage=no,e.performGDocsProcessContent=Ga,e.performGDocsSplitText=Ua,e.processContent=Sa,e.readData=sn,e.rebuildGDocsSentenceFromPartialTranslation=Va,e.redirectToExternalURL=B,e.requestDictionary=ea,e.sendDAPAlternativesEvent=en,e.sendDAPBrowserInstanceIdCreated=Bt,e.sendDAPCloseInlineHighlighter=Ot,e.sendDAPCloseInputHighlighter=Rt,e.sendDAPContentScriptErrorData=Ze,e.sendDAPCustomizationEnabled=$t,e.sendDAPDeeplWriteEvent=Ht,e.sendDAPDetectLanguage=ct,e.sendDAPDictionaryStatus=bt,e.sendDAPDisabledDictionaryHover=kt,e.sendDAPDocTransClick=rt,e.sendDAPErrorData=$e,e.sendDAPExtensionOpened=Qe,e.sendDAPFPTHide=mt,e.sendDAPFTPBlockSizeExceeded=async function(e){return Xe((t=>({...t,eventId:60006,fptBlockSizeExceededData:{translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},domainName:e.domainName}})))},e.sendDAPGDocsMaxCharExceededShown=Ut,e.sendDAPGDocsMaxCharExceededTryProClicked=Gt,e.sendDAPGDocsReplaceText=At,e.sendDAPGmailCharLimitReached=zt,e.sendDAPIconHover=ft,e.sendDAPInlineCopy=Et,e.sendDAPInlineDragStart=gt,e.sendDAPInlineListen=Tt,e.sendDAPInlinePositionChange=dt,e.sendDAPInlineSettingOpened=st,e.sendDAPInputTranslationInjection=Je,e.sendDAPInstallSuccess=Nt,e.sendDAPInstallationIdCreated=jt,e.sendDAPLandingOnSpecificWebsite=Lt,e.sendDAPLingueeErrorData=Pt,e.sendDAPLoggedIn=Kt,e.sendDAPLoggedOut=Xt,e.sendDAPLogin=vt,e.sendDAPLogoClicked=et,e.sendDAPLogout=Ft,e.sendDAPNotificationViewed=tt,e.sendDAPOnboardingModalShown=Wt,e.sendDAPOnboardingOpenExternalPage=wt,e.sendDAPOnboardingStepChange=_t,e.sendDAPOpenDictionarySection=Dt,e.sendDAPOpenInlineHighlighter=Ct,e.sendDAPOpenInputHighlighter=yt,e.sendDAPReadMoreClicked=It,e.sendDAPRecommendToAFriendClick=ot,e.sendDAPRightClick=lt,e.sendDAPSessionStarted=qt,e.sendDAPSettingsChanged=it,e.sendDAPShortcutUsed=nt,e.sendDAPTrackUpgradeNotificationAction=Qt,e.sendDAPTrackUpgradeNotificationClosed=Jt,e.sendDAPTrackUpgradeNotificationDisplayed=Zt,e.sendDAPTranslateAcceptOrUndoEvent=Yt,e.sendDAPTranslationErrorData=ze,e.sendDAPTranslationRequest=Ye,e.sendDAPTwitterTweetTranslationFailed=ht,e.sendDAPUILocationClicked=Vt,e.sendDAPUiAction=at,e.sendDAPVoiceOverStops=St,e.sendDAPWhatsAppMessageTranslated=ut,e.sendDAPWhatsAppMessageTranslationFailed=pt,e.sendDAPZendeskCustomizationEvent=xt,e.sendDAPtrackSessionType=Mt,e.sendNotification=pr,e.setAuthTokens=En,e.setBrowserInstanceId=Cn,e.setUserInfoFromClientState=An,e.splitText=ya,e.stopSpeech=Sr,e.testClassicApi=Zr,e.textToSpeech=Ir,e.trackAlternativesEvent=qr,e.trackCloseInlineHighlighter=Nr,e.trackCloseInputHighlighter=Ar,e.trackCustomizationEnabled=Vr,e.trackDeeplWriteEvent=Gr,e.trackDetectLanguage=Ba,e.trackDictionaryStatus=Or,e.trackDisabledDictionaryHover=Dr,e.trackDocTransClick=Xa,e.trackExtensionOpenedEvent=qa,e.trackFptHide=er,e.trackGDocsMaxCharExceededTryProClicked=vr,e.trackGDocsReplaceText=cr,e.trackGdocsMaxCharExceededShown=xr,e.trackGmailCharLimitReached=Br,e.trackIconHover=tr,e.trackInlineCopy=nr,e.trackInlineDragStart=Qa,e.trackInlineListen=rr,e.trackInlinePositionChange=Ja,e.trackInlineSettingsOpened=$a,e.trackInputTranslationInjection=Ha,e.trackLandingOnWebsite=fr,e.trackLingueeErrorData=Pr,e.trackLogoClickedEvent=Ka,e.trackOnboardingModalShown=Fr,e.trackOnboardingOpenExternalLink=sr,e.trackOnboardingStepChange=ar,e.trackOpenDictionarySection=br,e.trackOpenInlineHighlighter=Rr,e.trackOpenInputHighlighter=yr,e.trackReadMoreClick=ir,e.trackRecommendToAFriendClick=Ya,e.trackRightClick=Za,e.trackSettingChanged=za,e.trackTranslateAcceptOrUndoEvent=Wr,e.trackUILocationClicked=Ur,e.trackUiAction=Er,e.trackUpgradeNotificationAction=zr,e.trackUpgradeNotificationClosed=$r,e.trackUpgradeNotificationDisplayed=Yr,e.trackUseOfShortcut=mr,e.trackVoiceOverStops=or,e.trackZendeskCustomizationEvent=kr,e.translate=Jn,e.translateGmailReceivedEmail=ka,e.translateHtmlRequest=Oa,e.translateInlineRequest=ba,e.translateInputRequest=Da,e.translateLinkedInPostRequest=xa,e.translateSelection=Tr,e.translateTwitterTweetRequest=Pa,e.translateWhatsAppMessageRequest=va,e.translateWhatsAppMessagesRequest=Fa,e.translateZendeskMessageRequest=ja,e.triggerTranslateInline=Ca,e.updateDynamicRules=po,e.updateSession=mn,e.writeData=on,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=background.js.map
