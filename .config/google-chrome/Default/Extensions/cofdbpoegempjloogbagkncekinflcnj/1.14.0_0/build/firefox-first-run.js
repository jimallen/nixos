!function(){"use strict";function e(){}function t(e){return e()}function o(){return Object.create(null)}function n(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function c(e,t,o){e.insertBefore(t,o||null)}function l(e){e.parentNode&&e.parentNode.removeChild(e)}function a(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function d(){return p(" ")}function f(){return p("")}function h(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function m(e,t,o){null==o?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}class u{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,o=null){var n;this.e||(this.is_svg?this.e=(n=t.nodeName,document.createElementNS("http://www.w3.org/2000/svg",n)):this.e=a(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(o)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)c(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(l)}}let g;function w(e){g=e}const _=[],b=[];let A=[];const E=[],x=Promise.resolve();let S=!1;function T(e){A.push(e)}const v=new Set;let N=0;function k(){if(0!==N)return;const e=g;do{try{for(;N<_.length;){const e=_[N];N++,w(e),O(e.$$)}}catch(e){throw _.length=0,N=0,e}for(w(null),_.length=0,N=0;b.length;)b.pop()();for(let e=0;e<A.length;e+=1){const t=A[e];v.has(t)||(v.add(t),t())}A.length=0}while(_.length);for(;E.length;)E.pop()();S=!1,v.clear(),w(e)}function O(e){if(null!==e.fragment){e.update(),n(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const I=new Set;function L(e,t){const o=e.$$;null!==o.fragment&&(!function(e){const t=[],o=[];A.forEach((n=>-1===e.indexOf(n)?t.push(n):o.push(n))),o.forEach((e=>e())),A=t}(o.after_update),n(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function R(e,t){-1===e.$$.dirty[0]&&(_.push(e),S||(S=!0,x.then(k)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $(s,i,c,a,p,d,f,h=[-1]){const m=g;w(s);const u=s.$$={fragment:null,ctx:[],props:d,update:e,not_equal:p,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(m?m.$$.context:[])),callbacks:o(),dirty:h,skip_bound:!1,root:i.target||m.$$.root};f&&f(u.root);let _=!1;if(u.ctx=c?c(s,i.props||{},((e,t,...o)=>{const n=o.length?o[0]:t;return u.ctx&&p(u.ctx[e],u.ctx[e]=n)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](n),_&&R(s,e)),t})):[],u.update(),_=!0,n(u.before_update),u.fragment=!!a&&a(u.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);u.fragment&&u.fragment.l(e),e.forEach(l)}else u.fragment&&u.fragment.c();i.intro&&((b=s.$$.fragment)&&b.i&&(I.delete(b),b.i(A))),function(e,o,s,i){const{fragment:c,after_update:l}=e.$$;c&&c.m(o,s),i||T((()=>{const o=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...o):n(o),e.$$.on_mount=[]})),l.forEach(T)}(s,i.target,i.anchor,i.customElement),k()}var b,A;w(m)}class y{$destroy(){L(this,1),this.$destroy=e}$on(t,o){if(!r(o))return e;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(o),()=>{const e=n.indexOf(o);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function P(e){return new Promise(((t,o)=>{chrome.runtime.sendMessage(e,(function(e){e&&e.error&&o(e),t(e)}))}))}const D={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function j(e,t){let o;try{switch(e){case D.chrome:case D.brave:o=t.split("Chrome/")[1].split(" ")[0];break;case D.edge:o=t.split("Edg/")[1].split(" ")[0];break;case D.firefox:o=t.split("Firefox/")[1].split(" ")[0];break;case D.opera:o=t.split("OPR/")[1].split(" ")[0];break;case D.safari:o=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!o&&navigator?.userAgentData&&function(e){return e===D.chrome||e===D.edge||e===D.brave||e===D.opera}(e)&&(o=G(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return o&&"string"==typeof o?o:"unknown_browser_version"}function G(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function M(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW"},APP_VERSION:"1.14.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.14.0",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW"},APP_VERSION:"1.14.0",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0}}.browserBuild.toLowerCase()===D.firefox.toLowerCase();const e=chrome.runtime.getURL("");return function(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let o="unknown_browser",n="unknown_browser_version";const r=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),r=e.match(/edg/i)||G(D.edge),s=e.match(/firefox|fxios/i),i=e.match(/opr\//i)||G(D.opera),c=e.match(/safari/i),l=G(D.brave);t?(o=D.chrome,r&&(o=D.edge),i&&(o=D.opera),l&&(o=D.brave)):r?o=D.edge:s?o=D.firefox:i?o=D.opera:c&&(o=D.safari),n=j(o,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:o,browserVersion:n,browserLang:r}}().browser===D.firefox||/moz-extension:\/\//gm.test(e)}const C="ONBOARDING",W="PRIVACY_POLICY";function F(e,t,o){let n={block:"end",position:e.length};return t.forEach((t=>{const r=e.indexOf(`<${t}>`,o);r>-1&&r<n.position&&(n={block:t,position:r})})),[n.block,n.position]}function V(e,t=[]){const o=[];let n=0,r=!1;for(;!r;){const[s,i]=F(e,t,n);if("end"===s&&(r=!0),n<i&&o.push({block:"main",text:e.substring(n,i)}),r)break;const c=e.indexOf(`</${s}>`,i);-1===c?(o.push({block:s,text:e.substring(i+`<${s}>`.length)}),r=!0):(o.push({block:s,text:e.substring(i+`<${s}>`.length,c)}),n=c+`</${s}>`.length)}return o}const q="DEEPL_COM_TERMS_OF_SERVICE_FREE";function U(e,t,o){const n=e.slice();return n[4]=t[o],n}function B(t){let o,n,r=t[4].text+"";return{c(){o=new u(!1),n=f(),o.a=n},m(e,t){o.m(r,e,t),c(e,n,t)},p:e,d(e){e&&l(n),e&&o.d()}}}function Z(t){let o,n,r,s=t[4].text+"";return{c(){o=a("span"),m(o,"class","dl-link svelte-s29ee1")},m(e,i){c(e,o,i),o.innerHTML=s,n||(r=h(o,"click",t[3]),n=!0)},p:e,d(e){e&&l(o),n=!1,r()}}}function Y(e){let t;let o=function(e,t){return"termsLink"===e[4].block?Z:B}(e),n=o(e);return{c(){n.c(),t=f()},m(e,o){n.m(e,o),c(e,t,o)},p(e,t){n.p(e,t)},d(e){n.d(e),e&&l(t)}}}function H(t){let o,r,s,p,f,g,w,_,b,A,E,x,S,T,v,N,k,O,I,L,R,$,y=chrome.i18n.getMessage("firefox_legal_disclaimer_body_main")+"",P=V(chrome.i18n.getMessage("firefox_legal_disclaimer_link_two"),["termsLink"]),D=[];for(let e=0;e<P.length;e+=1)D[e]=Y(U(t,P,e));return{c(){o=a("div"),o.innerHTML='<div class="dl-logo svelte-s29ee1"></div>',r=d(),s=a("div"),p=a("div"),f=a("div"),g=a("div"),w=a("p"),w.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_title")}`,_=d(),b=new u(!1),A=d(),E=a("ul"),x=a("li"),S=a("span"),S.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_link_one")}`,T=d(),v=a("li");for(let e=0;e<D.length;e+=1)D[e].c();N=d(),k=a("div"),O=a("button"),O.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_allow_button")}`,I=d(),L=a("button"),L.textContent=`${chrome.i18n.getMessage("firefox_legal_disclaimer_disallow_and_uninstall_button")}`,m(o,"class","dl-logo-container svelte-s29ee1"),function(e,t,o){e.classList[o?"add":"remove"](t)}(o,"isFirefoxExtension",M),m(w,"class","svelte-s29ee1"),m(g,"class","dl-title"),b.a=A,m(S,"class","dl-link svelte-s29ee1"),m(f,"class","scrollable svelte-s29ee1"),m(O,"class","svelte-s29ee1"),m(L,"class","svelte-s29ee1"),m(k,"class","footer svelte-s29ee1"),m(p,"class","dl-notice-container svelte-s29ee1"),m(s,"class","dl-firefox-first-run-page svelte-s29ee1")},m(e,n){c(e,o,n),c(e,r,n),c(e,s,n),i(s,p),i(p,f),i(f,g),i(g,w),i(f,_),b.m(y,f),i(f,A),i(f,E),i(E,x),i(x,S),i(E,T),i(E,v);for(let e=0;e<D.length;e+=1)D[e]&&D[e].m(v,null);i(p,N),i(p,k),i(k,O),i(k,I),i(k,L),R||($=[h(S,"click",t[2]),h(O,"click",t[0]),h(L,"click",t[1])],R=!0)},p(e,[t]){if(8&t){let o;for(P=V(chrome.i18n.getMessage("firefox_legal_disclaimer_link_two"),["termsLink"]),o=0;o<P.length;o+=1){const n=U(e,P,o);D[o]?D[o].p(n,t):(D[o]=Y(n),D[o].c(),D[o].m(v,null))}for(;o<D.length;o+=1)D[o].d(1);D.length=P.length}},i:e,o:e,d(e){e&&l(o),e&&l(r),e&&l(s),function(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}(D,e),R=!1,n($)}}}function K(e){return[()=>{P({action:"dlOpenInternalPage",payload:{destination:C}}),window.close()},()=>{browser.management.uninstallSelf()},()=>{P({action:"dlOpenInternalPage",payload:{destination:W}})},()=>{console.log("tos link"),P({action:"dlExternalURLRedirect",payload:{destination:q}})}]}new class extends y{constructor(e){super(),$(this,e,K,H,s,{})}}({target:document.body})}();
//# sourceMappingURL=firefox-first-run.js.map
